<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/assets/images/icon.ico" type="image/x-icon">
    <!-- PERBAIKAN: Viewport tag yang lebih lengkap untuk mencegah zoom dan scroll horizontal -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <title>CS Otomatis - PX STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c63ff;
            --primary-dark: #564fd8;
            --secondary: #4d44db;
            --accent: #9d4edd;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-hover: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            /* PERBAIKAN: Mencegah seleksi teks yang tidak perlu */
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        html, body {
            /* PERBAIKAN: Pastikan html dan body tidak bisa scroll horizontal */
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            padding-bottom: 80px;
            /* PERBAIKAN: Mencegah zoom dengan gesture */
            touch-action: pan-y;
            /* PERBAIKAN: Pastikan konten tidak melebihi viewport */
            max-width: 100vw;
            min-height: 100vh;
        }
        
        .app-container {
            padding: 15px;
            padding-bottom: 80px;
            /* PERBAIKAN: Ganti max-width dengan width dan atur responsif */
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            /* PERBAIKAN: Pastikan kontainer tidak melebihi viewport */
            box-sizing: border-box;
            overflow: hidden;
        }
        
        /* Header */
        .page-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            /* PERBAIKAN: Pastikan header tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            margin-right: 15px;
            cursor: pointer;
            /* PERBAIKAN: Pastikan tombol tidak menyebabkan zoom */
            touch-action: manipulation;
        }
        
        .page-title {
            font-size: 1.3rem;
            font-weight: 600;
            /* PERBAIKAN: Mencegah overflow teks */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* CS Bot Container */
        .cs-container {
            background-color: var(--dark-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--box-shadow);
            /* PERBAIKAN: Pastikan kontainer tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .cs-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            /* PERBAIKAN: Pastikan header tidak keluar dari viewport */
            width: 100%;
        }
        
        .cs-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
            /* PERBAIKAN: Pastikan avatar tidak keluar dari viewport */
            flex-shrink: 0;
        }
        
        .cs-info h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            /* PERBAIKAN: Mencegah overflow teks */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .cs-status {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #4CAF50;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Chat Container */
        .chat-container {
            height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--dark-bg);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            /* PERBAIKAN: Pastikan chat container tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 15px;
            position: relative;
            animation: fadeIn 0.3s ease;
            /* PERBAIKAN: Pastikan pesan tidak keluar dari viewport */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: var(--dark-hover);
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            align-self: flex-end;
            background-color: var(--primary);
            border-bottom-right-radius: 5px;
        }
        
        .message-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }
        
        .bot-message .message-time {
            text-align: left;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
            /* PERBAIKAN: Pastikan grid tidak keluar dari viewport */
            width: 100%;
        }
        
        .quick-action-btn {
            background-color: var(--dark-hover);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            /* PERBAIKAN: Pastikan tombol tidak menyebabkan zoom */
            touch-action: manipulation;
        }
        
        .quick-action-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .quick-action-btn i {
            display: block;
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        /* Input Area - PERBAIKAN */
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            /* PERBAIKAN: Pastikan input container tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 15px;
            background-color: var(--dark-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 0.9rem;
            /* PERBAIKAN: Pastikan input tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
            /* PERBAIKAN: Mencegah zoom saat fokus di iOS */
            font-size: 16px;
        }
        
        .message-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        /* PERBAIKAN: Tombol kirim lebih bulat dan proporsional */
        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(108, 99, 255, 0.3);
            /* PERBAIKAN: Pastikan tombol tidak menyebabkan zoom */
            touch-action: manipulation;
        }
        
        .send-btn:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
        }
        
        .send-btn:active {
            transform: scale(0.98);
        }
        
        .send-btn i {
            font-size: 1.1rem;
        }
        
        /* FAQ Section */
        .faq-section {
            background-color: var(--dark-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            /* PERBAIKAN: Pastikan FAQ section tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .faq-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .faq-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 0;
            cursor: pointer;
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
        
        .faq-item.active .faq-answer {
            max-height: 200px;
        }
        
        .faq-item.active .faq-arrow {
            transform: rotate(180deg);
        }
        
        .faq-arrow {
            transition: transform 0.3s ease;
        }
        
        /* Contact Options */
        .contact-options {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            /* PERBAIKAN: Pastikan contact options tidak keluar dari viewport */
            width: 100%;
            box-sizing: border-box;
        }
        
        .contact-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            /* PERBAIKAN: Pastikan tombol tidak menyebabkan zoom */
            touch-action: manipulation;
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
        }
        
        .whatsapp-btn:hover {
            background-color: #128C7E;
        }
        
        .email-btn {
            background-color: var(--dark-hover);
            color: var(--text-primary);
        }
        
        .email-btn:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            margin-top: 10px;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-secondary);
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: var(--dark-card);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            padding: 10px 0;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            z-index: 1000;
            /* PERBAIKAN: Pastikan navbar tidak keluar dari viewport */
            box-sizing: border-box;
        }

        .center-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .logo-circle {
            background-color: #7540f1;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }

        .nav-logo {
            height: 40px;
        }

        .menu-title {
            font-size: 12px;
            color: #a3a1a1;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 10px;
            cursor: pointer;
            flex: 1;
            /* PERBAIKAN: Pastikan item nav tidak menyebabkan zoom */
            touch-action: manipulation;
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }

        /* Suggestions */
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            /* PERBAIKAN: Pastikan suggestions tidak keluar dari viewport */
            width: 100%;
        }

        .suggestion-chip {
            background-color: var(--dark-hover);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            /* PERBAIKAN: Pastikan chip tidak menyebabkan zoom */
            touch-action: manipulation;
        }

        .suggestion-chip:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Message Reactions */
        .message-reactions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .reaction-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 10px;
            transition: var(--transition);
        }

        .reaction-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--primary);
        }
        
        /* PERBAIKAN: Media query untuk perangkat mobile */
        @media (max-width: 480px) {
            .app-container {
                padding: 10px;
                padding-bottom: 80px;
            }
            
            .cs-container {
                padding: 15px;
            }
            
            .chat-container {
                height: 350px;
            }
            
            .message {
                max-width: 85%;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .quick-action-btn {
                padding: 10px;
                font-size: 0.8rem;
            }
            
            .faq-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Konten HTML tetap sama seperti sebelumnya -->
    <div class="app-container">
        <!-- Header -->
        <div class="page-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1 class="page-title">CS Otomatis</h1>
        </div>

        <!-- CS Bot Container -->
        <div class="cs-container">
            <div class="cs-header">
                <div class="cs-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="cs-info">
                    <h3>CS PX STORE</h3>
                    <div class="cs-status">
                        <div class="status-dot"></div>
                        <span>Online - Siap membantu Anda</span>
                    </div>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container" id="chatContainer">
                <!-- Messages will be inserted here by JavaScript -->
            </div>

            <!-- Suggestions -->
            <div class="suggestions" id="suggestions">
                <div class="suggestion-chip" onclick="suggestionAction('cara top up saldo utama')">Cara Top Up Saldo</div>
                <div class="suggestion-chip" onclick="suggestionAction('perbedaan saldo utama dan qris')">Perbedaan Saldo</div>
                <div class="suggestion-chip" onclick="suggestionAction('cara tembak paket')">Tembak Paket</div>
                <div class="suggestion-chip" onclick="suggestionAction('layanan vpn')">Layanan VPN</div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="quick-action-btn" onclick="quickAction('topup_utama')">
                    <i class="fas fa-wallet"></i>
                    <span>Saldo Utama</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('topup_qris')">
                    <i class="fas fa-qrcode"></i>
                    <span>Saldo QRIS</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('game')">
                    <i class="fas fa-gamepad"></i>
                    <span>Top Up Game</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('vpn')">
                    <i class="fas fa-shield-alt"></i>
                    <span>Layanan VPN</span>
                </div>
                <!-- Menu Pintasan Baru: Tembak Paket -->
                <div class="quick-action-btn" onclick="quickAction('tembak_paket')">
                    <i class="fas fa-bolt"></i>
                    <span>Tembak Paket</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('poin')">
                    <i class="fas fa-star"></i>
                    <span>Klaim Poin</span>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <input type="text" class="message-input" id="messageInput" placeholder="Ketik pertanyaan Anda..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" onclick="sendMessage()" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
                <span style="margin-left: 10px; font-size: 0.9rem; color: var(--text-secondary);">CS sedang mengetik...</span>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section">
            <h3 class="faq-title">Pertanyaan Umum</h3>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara top up saldo utama?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Untuk top up saldo utama:<br>
                    1. Klik tombol "Top Up" di saldo utama<br>
                    2. Pilih nominal (min. Rp 10.000)<br>
                    3. Pilih metode pembayaran (QRIS/DANA)<br>
                    4. Unggah bukti pembayaran<br>
                    5. Saldo otomatis ditambahkan setelah verifikasi
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara top up saldo QRIS?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Untuk top up saldo QRIS (rekber):<br>
                    1. Klik tombol "Top Up" di saldo QRIS<br>
                    2. Pilih nominal (min. Rp 10.000)<br>
                    3. Scan QRIS yang tersedia<br>
                    4. Bayar sesuai nominal<br>
                    5. Saldo otomatis masuk setelah pembayaran terdeteksi
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Apa perbedaan saldo utama dan QRIS?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    <strong>Saldo Utama:</strong><br>
                    - Untuk pembelian semua layanan<br>
                    - Top up via transfer manual & QRIS<br>
                    - Upload bukti bayar saldo langsung masuk setelah kirim bukti transfer<br>
                    <br>
                    <strong>Saldo QRIS (Rekber):</strong><br>
                    - Khusus transaksi menggunakan QRIS<br>
                    - Sistem rekening bersama (rekber)<br>
                    - Proses cepat, aman & terpercaya<br>
                    - Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi<br>
                    - Dapat digunakan untuk pencairan paylater, dana cicil dll<br>
                    - Biaya fee hanya 3k saja<br>
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Berapa lama proses top up?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Proses top up:<br>
                    - Saldo Utama: 1-5 menit setelah bukti pembayaran diverifikasi<br>
                    - Saldo QRIS: Instan setelah pembayaran terdeteksi sistem
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara klaim poin?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Poin otomatis terkumpul setiap transaksi. Tukarkan poin di menu "Poin" untuk mendapatkan saldo atau voucher diskon.
                </div>
            </div>
            <!-- FAQ Baru: Cara Tembak Paket -->
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara tembak paket?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Cara tembak paket:<br>
                    1. Input nomor yang akan di-dor<br>
                    2. Tunggu hingga ada SMS kode OTP<br>
                    3. Input kode OTP di kolom yang tersedia<br>
                    4. Klik verifikasi untuk menyelesaikan proses<br>
                    <br>
                    Pastikan nomor aktif dan memiliki sinyal yang baik untuk menerima SMS OTP.
                </div>
            </div>
        </div>

        <!-- Contact Options -->
        <div class="contact-options">
            <button class="contact-btn whatsapp-btn" onclick="contactWhatsApp()">
                <i class="fab fa-whatsapp"></i>
                WhatsApp
            </button>
            <button class="contact-btn email-btn" onclick="contactEmail()">
                <i class="fas fa-envelope"></i>
                Email
            </button>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navbar">
        <div class="nav-item" onclick="navigateTo('beranda.html')">
            <i class="fas fa-home"></i>
            <span>Beranda</span>
        </div>

        <div class="nav-item" onclick="navigateTo('riwayat.html')">
            <i class="fas fa-shopping-cart"></i>
            <span>Transaksi</span>
        </div>

        <div class="nav-item center-menu" onclick="navigateTo('server.html')">
            <div class="logo-circle">
                <img src="assets/images/icon.ico" alt="Logo" class="nav-logo">
            </div>
            <span class="menu-title">Server</span>
        </div>

        <div class="nav-item" onclick="navigateTo('profil.html')">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </div>
        <div class="nav-item active" onclick="navigateTo('cs-otomatis.html')">
            <i class="fas fa-headset"></i>
            <span>Bantuan</span>
        </div>
    </div>

    <script>
        // Knowledge Base untuk CS Otomatis - DIPERBAIKI
        const knowledgeBase = {
            'greeting': {
                patterns: ['halo', 'hai', 'hi', 'hello', 'selamat pagi', 'selamat siang', 'selamat malam'],
                responses: [
                    'Halo! Selamat datang di PX STORE. Ada yang bisa saya bantu? 😊',
                    'Hai! Saya CS PX STORE, siap membantu Anda hari ini! ✨',
                    'Selamat datang! Silakan tanyakan apa yang perlu Anda ketahui tentang layanan kami.'
                ]
            },
            'topup_utama': {
                patterns: ['cara top up saldo utama', 'top up saldo utama', 'isi saldo utama', 'tambah saldo utama', 'deposit saldo utama'],
                responses: [
                    '**Saldo Utama** adalah saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE.\n\nUntuk top up **Saldo Utama**:\n1. Klik tombol "Top Up" di saldo utama\n2. Pilih nominal (min. Rp 10.000)\n3. Pilih metode pembayaran (QRIS/DANA)\n4. Unggah bukti pembayaran\n5. Saldo langsung masuk setelah kirim bukti transfer\n\nSaldo utama bisa digunakan untuk semua layanan PX STORE.',
                    '**Saldo Utama** adalah saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE.\n\n**Top Up Saldo Utama**:\n- Minimal Rp 10.000\n- Metode: QRIS & DANA\n- Upload bukti bayar, saldo langsung masuk\n- Untuk semua layanan (game, VPN, dll)'
                ]
            },
            'topup_qris': {
                patterns: ['cara top up saldo qris', 'top up saldo qris', 'isi saldo qris', 'tambah saldo qris', 'deposit saldo qris', 'rekber', 'rekening bersama'],
                responses: [
                    'Untuk top up **Saldo QRIS (Rekber)**:\n1. Klik tombol "QRIS"\n2. Anda akan dibawa ke halaman Rekber QRIS\n3. Scan QRIS yang tersedia\n4. Bayar sesuai nominal\n5. Saldo otomatis masuk setelah mengirim bukti pembayaran\n\n**Keuntungan Saldo QRIS:**\n- Sistem rekening bersama (rekber)\n- Proses cepat, aman & terpercaya\n- Biaya fee hanya 3k saja\n- Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi\n- Dapat digunakan untuk pencairan paylater, dana cicil dll',
                    '**Saldo QRIS - Sistem Rekber**:\n💰 Top up via scan QRIS\n💰 Proses instan setelah bayar\n💰 Biaya fee hanya 3k\n💰 Khusus transaksi QRIS\n💰 Dapat digunakan untuk pencairan paylater, dana cicil dll\n\nSaldo QRIS menggunakan sistem rekening bersama untuk keamanan bertransaksi.'
                ]
            },
            'perbedaan_saldo': {
                patterns: ['perbedaan saldo utama', 'beda saldo utama dan qris', 'saldo utama vs qris', 'apa bedanya saldo', 'perbedaan saldo'],
                responses: [
                    '**Perbedaan Saldo Utama vs Saldo QRIS:**\n\n💰 **SALDO UTAMA:**\n- Saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE\n- Untuk semua layanan\n- Top up via transfer manual & QRIS\n- Upload bukti bayar saldo langsung masuk setelah kirim bukti transfer\n\n🔐 **SALDO QRIS (REKBER):**\n- Khusus transaksi menggunakan QRIS\n- Sistem rekening bersama (rekber)\n- Proses cepat, aman & terpercaya\n- Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi\n- Dapat digunakan untuk pencairan paylater, dana cicil dll\n- Biaya fee hanya 3k saja\n\nPilih sesuai kebutuhan Anda!'
                ]
            },
            'game': {
                patterns: ['game', 'top up game', 'free fire', 'mobile legends', 'pubg', 'cod', 'roblox', 'genshin', 'valorant'],
                responses: [
                    'Untuk top up game di aplikasi PX STORE:\n1. Buka aplikasi PX STORE\n2. Pilih menu "Top Up Game"\n3. Pilih game yang ingin Anda top up\n4. Masukkan ID game dan server\n5. Pilih nominal yang diinginkan\n6. Pilih metode pembayaran\n7. Konfirmasi pembayaran\n8. Item akan langsung masuk ke akun game Anda\n\nProses cepat & aman! 🎮',
                    'Kami menyediakan top up untuk berbagai game:\n🎮 Free Fire\n🎮 Mobile Legends\n🎮 PUBG Mobile\n🎮 Call of Duty\n🎮 Roblox\n🎮 Genshin Impact\n🎮 Valorant\n\nPilih game favorit Anda di menu "Top Up Game"!',
                    'Top up game tersedia untuk semua game populer. Saldo utama Anda bisa digunakan untuk pembelian diamond, UC, CP, dan item game lainnya. Proses cepat & aman!'
                ]
            },
            'vpn': {
                patterns: ['vpn', 'ssh', 'trojan', 'vmess', 'vless', 'akun vpn'],
                responses: [
                    'Layanan VPN PX STORE:\n🛡️ SSH - Untuk browsing aman\n🛡️ Trojan - Kecepatan optimal\n🛡️ Vmess - Kompatibilitas luas\n🛡️ Vless - Efisiensi tinggi\n\nPilih sesuai kebutuhan Anda di menu "Layanan VPN"!',
                    'Kami menyediakan berbagai jenis VPN dengan server terbaik. Setiap pembelian mendapatkan:\n- Config file (req config langsung ke admin)\n- Tutorial setup\n- Support 24/7\n- Garansi akun aktif'
                ]
            },
            'payment': {
                patterns: ['pembayaran', 'bayar', 'metode bayar', 'qris', 'dana', 'transfer'],
                responses: [
                    'Metode pembayaran yang tersedia:\n💳 QRIS - Scan & bayar (untuk saldo QRIS)\n💳 DANA - Transfer langsung (untuk saldo utama)\n\nSemua metode aman & terverifikasi.',
                    'Pembayaran di PX STORE mendukung:\n- QRIS (semua e-wallet & bank) - untuk saldo QRIS\n- DANA (transfer) - untuk saldo utama\n\nPembayaran diverifikasi otomatis dalam 1-5 menit.'
                ]
            },
            'saldo': {
                patterns: ['saldo', 'cek saldo'],
                responses: [
                    'Saldo di PX STORE:\n💰 Saldo Utama - Untuk semua transaksi\n💰 Saldo QRIS - Khusus transaksi QRIS\n\nCek saldo Anda di menu "Profil" atau halaman utama.',
                    'Anda memiliki 2 jenis saldo:\n1. **Saldo Utama** - Untuk semua layanan\n2. **Saldo QRIS** - Khusus transaksi QRIS\n\nLihat detail saldo di profil atau halaman utama.'
                ]
            },
            'poin': {
                patterns: ['poin', 'klaim poin', 'reward', 'hadiah'],
                responses: [
                    'Sistem Poin PX STORE:\n⭐ Dapatkan poin dari setiap transaksi\n⭐ Kumpulkan dan tukarkan dengan hadiah\n⭐ Klaim poin di menu "Poin"\n\nPoin bisa ditukar dengan saldo atau voucher diskon!',
                    'Setiap transaksi memberi Anda poin reward. Kumpulkan dan tukarkan di menu "Poin" untuk mendapatkan:\n- Saldo tambahan\n- Voucher diskon\n- Hadiah spesial lainnya'
                ]
            },
            'tembak_paket': {
                patterns: ['tembak paket', 'dor paket', 'paket internet', 'tembak kuota', 'dor kuota'],
                responses: [
                    '**Tembak Paket** adalah layanan untuk mendapatkan kuota internet dengan harga lebih murah.\n\nCara menggunakan:\n1. Input nomor yang akan di-dor\n2. Tunggu hingga ada SMS kode OTP\n3. Input kode OTP di kolom yang tersedia\n4. Klik verifikasi untuk menyelesaikan proses\n\nPastikan nomor aktif dan memiliki sinyal yang baik untuk menerima SMS OTP.',
                    'Layanan **Tembak Paket** tersedia di menu "Tembak Paket". Proses:\n📱 Input nomor target\n📱 Tunggu SMS OTP\n📱 Input kode OTP\n📱 Verifikasi & selesai\n\nDapatkan kuota internet dengan harga lebih terjangkau!'
                ]
            },
            'help': {
                patterns: ['bantuan', 'help', 'tolong', 'cs', 'customer service'],
                responses: [
                    'Saya di sini untuk membantu! Silakan tanyakan tentang:\n- Top up saldo utama & QRIS\n- Layanan game & VPN\n- Tembak paket\n- Klaim poin\n- Atau hal lainnya\n\nGunakan juga tombol cepat di atas untuk akses lebih mudah!',
                    'CS PX STORE siap membantu! Anda bisa bertanya tentang:\n💰 Top up saldo\n🎮 Game & VPN\n📱 Tembak paket\n⭐ Poin reward\n\nAtau gunakan menu FAQ untuk pertanyaan umum.'
                ]
            },
            'thanks': {
                patterns: ['terima kasih', 'thanks', 'makasih', 'thank you'],
                responses: [
                    'Sama-sama! 😊 Senang bisa membantu. Jika ada pertanyaan lain, jangan ragu untuk bertanya!',
                    'Terima kasih kembali! 🎉 Jangan sungkan menghubungi kami jika butuh bantuan lagi.'
                ]
            },
            'default': {
                responses: [
                    'Maaf, saya belum paham pertanyaan Anda. Bisa diulangi dengan kata kunci lain?',
                    'Saya belum mengerti pertanyaan tersebut. Coba tanyakan tentang top up saldo, game, VPN, atau layanan lainnya.',
                    'Mohon maaf, sebagai CS otomatis saya terbatas pada topik tertentu. Silakan tanyakan tentang layanan PX STORE seperti top up saldo, game, VPN, atau tembak paket.'
                ]
            }
        };

        // Fungsi untuk navigasi
        function navigateTo(page) {
            window.location.href = page;
        }

        // Fungsi untuk kembali
        function goBack() {
            window.history.back();
        }

        // Fungsi untuk toggle FAQ
        function toggleFAQ(element) {
            element.classList.toggle('active');
        }

        // Fungsi untuk mengirim pesan
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                messageInput.value = '';
                
                // Simulasi typing indicator
                showTypingIndicator();
                
                // Simulasi delay respon bot
                setTimeout(() => {
                    hideTypingIndicator();
                    const response = getBotResponse(message);
                    addMessage(response, 'bot');
                }, 1500);
            }
        }

        // Fungsi untuk menangani tombol enter
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Fungsi untuk menambahkan pesan ke chat
        function addMessage(text, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div>${formatMessage(text)}</div>
                <div class="message-time">${time}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Fungsi untuk memformat pesan (mengganti \n dengan <br>)
        function formatMessage(text) {
            return text.replace(/\n/g, '<br>');
        }

        // Fungsi untuk mendapatkan respon bot
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Cari kecocokan di knowledge base
            for (const [key, data] of Object.entries(knowledgeBase)) {
                if (key !== 'default') {
                    for (const pattern of data.patterns) {
                        if (lowerMessage.includes(pattern)) {
                            const responses = data.responses;
                            return responses[Math.floor(Math.random() * responses.length)];
                        }
                    }
                }
            }
            
            // Jika tidak ditemukan, gunakan respon default
            const defaultResponses = knowledgeBase.default.responses;
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        // Fungsi untuk menampilkan indikator typing
        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Fungsi untuk menyembunyikan indikator typing
        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        // Fungsi untuk aksi cepat
        function quickAction(action) {
            let message = '';
            
            switch(action) {
                case 'topup_utama':
                    message = 'Cara top up saldo utama';
                    break;
                case 'topup_qris':
                    message = 'Cara top up saldo QRIS';
                    break;
                case 'game':
                    message = 'Top up game';
                    break;
                case 'vpn':
                    message = 'Layanan VPN';
                    break;
                case 'tembak_paket':
                    message = 'Cara tembak paket';
                    break;
                case 'poin':
                    message = 'Cara klaim poin';
                    break;
            }
            
            addMessage(message, 'user');
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const response = getBotResponse(message);
                addMessage(response, 'bot');
            }, 1500);
        }

        // Fungsi untuk aksi saran
        function suggestionAction(text) {
            addMessage(text, 'user');
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const response = getBotResponse(text);
                addMessage(response, 'bot');
            }, 1500);
        }

        // Fungsi untuk kontak WhatsApp
        function contactWhatsApp() {
            window.open('https://wa.me/6281234567890?text=Halo%20CS%20PX%20STORE,%20saya%20butuh%20bantuan', '_blank');
        }

        // Fungsi untuk kontak Email
        function contactEmail() {
            window.location.href = 'mailto:cs@pxstore.com?subject=Bantuan%20CS%20PX%20STORE';
        }

        // Inisialisasi chat dengan pesan selamat datang
        window.onload = function() {
            setTimeout(() => {
                addMessage('Halo! Saya CS PX STORE. Ada yang bisa saya bantu hari ini? 😊', 'bot');
            }, 500);
        };
    </script>
</body>
</html>