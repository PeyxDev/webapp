<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/assets/images/icon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <title>CS Otomatis - PX STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c63ff;
            --primary-dark: #564fd8;
            --secondary: #4d44db;
            --accent: #9d4edd;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-hover: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        html, body {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            padding-bottom: 80px;
            touch-action: pan-y;
            max-width: 100vw;
            min-height: 100vh;
        }
        
        .app-container {
            padding: 15px;
            padding-bottom: 80px;
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        /* Header */
        .page-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            box-sizing: border-box;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            margin-right: 15px;
            cursor: pointer;
            touch-action: manipulation;
        }
        
        .page-title {
            font-size: 1.3rem;
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* CS Bot Container */
        .cs-container {
            background-color: var(--dark-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--box-shadow);
            width: 100%;
            box-sizing: border-box;
        }
        
        .cs-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        .cs-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .cs-info h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .cs-status {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #4CAF50;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Chat Container - PERBAIKAN UTAMA */
        .chat-container {
            height: 60vh; /* Menggunakan viewport height untuk ukuran yang lebih fleksibel */
            max-height: 500px; /* Batas maksimum untuk desktop */
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--dark-bg);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            box-sizing: border-box;
            /* Efek gradien di bagian atas dan bawah untuk indikasi scroll */
            mask-image: linear-gradient(to bottom, transparent 0%, black 5%, black 95%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 5%, black 95%, transparent 100%);
        }
        
        .message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 15px;
            position: relative;
            animation: fadeIn 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: var(--dark-hover);
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            align-self: flex-end;
            background-color: var(--primary);
            border-bottom-right-radius: 5px;
        }
        
        .message-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }
        
        .bot-message .message-time {
            text-align: left;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
            width: 100%;
        }
        
        .quick-action-btn {
            background-color: var(--dark-hover);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            touch-action: manipulation;
        }
        
        .quick-action-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .quick-action-btn i {
            display: block;
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        /* Input Area */
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 15px;
            background-color: var(--dark-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 100%;
            box-sizing: border-box;
            font-size: 16px;
        }
        
        .message-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(108, 99, 255, 0.3);
            touch-action: manipulation;
        }
        
        .send-btn:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
        }
        
        .send-btn:active {
            transform: scale(0.98);
        }
        
        .send-btn i {
            font-size: 1.1rem;
        }
        
        /* FAQ Section */
        .faq-section {
            background-color: var(--dark-card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .faq-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        
        .faq-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 0;
            cursor: pointer;
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
        
        .faq-item.active .faq-answer {
            max-height: 200px;
        }
        
        .faq-item.active .faq-arrow {
            transform: rotate(180deg);
        }
        
        .faq-arrow {
            transition: transform 0.3s ease;
        }
        
        /* Contact Options */
        .contact-options {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .contact-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            touch-action: manipulation;
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
        }
        
        .whatsapp-btn:hover {
            background-color: #128C7E;
        }
        
        .email-btn {
            background-color: var(--dark-hover);
            color: var(--text-primary);
        }
        
        .email-btn:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Typing Indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            margin-top: 10px;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-secondary);
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: var(--dark-card);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            padding: 10px 0;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            z-index: 1000;
            box-sizing: border-box;
        }

        .center-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .logo-circle {
            background-color: #7540f1;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }

        .nav-logo {
            height: 40px;
        }

        .menu-title {
            font-size: 12px;
            color: #a3a1a1;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 10px;
            cursor: pointer;
            flex: 1;
            touch-action: manipulation;
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }

        /* Suggestions */
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            width: 100%;
        }

        .suggestion-chip {
            background-color: var(--dark-hover);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            touch-action: manipulation;
        }

        .suggestion-chip:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }

        /* Message Reactions */
        .message-reactions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .reaction-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 10px;
            transition: var(--transition);
        }

        .reaction-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--primary);
        }
        
        /* PERBAIKAN: Media query untuk perangkat mobile */
        @media (max-width: 480px) {
            .app-container {
                padding: 10px;
                padding-bottom: 80px;
            }
            
            .cs-container {
                padding: 15px;
            }
            
            .chat-container {
                height: 65vh; /* Lebih tinggi di mobile */
                max-height: none;
            }
            
            .message {
                max-width: 85%;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .quick-action-btn {
                padding: 10px;
                font-size: 0.8rem;
            }
            
            .faq-section {
                padding: 15px;
            }

            /* Tambahkan di bagian CSS */
.bot-message strong {
    color: var(--primary);
    font-weight: 600;
}
        }

        /* PERBAIKAN: Media query untuk desktop */
        @media (min-width: 768px) {
            .app-container {
                max-width: 800px;
            }
            
            .chat-container {
                max-height: 600px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="page-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1 class="page-title">CS Otomatis</h1>
        </div>

        <!-- CS Bot Container -->
        <div class="cs-container">
            <div class="cs-header">
                <div class="cs-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="cs-info">
                    <h3>CS PX STORE</h3>
                    <div class="cs-status">
                        <div class="status-dot"></div>
                        <span>Online - Siap membantu Anda</span>
                    </div>
                </div>
            </div>

            <!-- Chat Container - PERBAIKAN UTAMA: Lebih besar dan panjang ke bawah -->
            <div class="chat-container" id="chatContainer">
                <!-- Messages will be inserted here by JavaScript -->
            </div>

            <!-- Suggestions - PERBAIKAN: Lebih banyak saran pertanyaan -->
            <div class="suggestions" id="suggestions">
                <div class="suggestion-chip" onclick="suggestionAction('cara top up saldo utama')">Cara Top Up Saldo</div>
                <div class="suggestion-chip" onclick="suggestionAction('perbedaan saldo utama dan qris')">Perbedaan Saldo</div>
                <div class="suggestion-chip" onclick="suggestionAction('cara tembak paket')">Tembak Paket</div>
                <div class="suggestion-chip" onclick="suggestionAction('layanan vpn')">Layanan VPN</div>
                <div class="suggestion-chip" onclick="suggestionAction('cara klaim poin')">Klaim Poin</div>
                <div class="suggestion-chip" onclick="suggestionAction('top up game')">Top Up Game</div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="quick-action-btn" onclick="quickAction('topup_utama')">
                    <i class="fas fa-wallet"></i>
                    <span>Saldo Utama</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('topup_qris')">
                    <i class="fas fa-qrcode"></i>
                    <span>Saldo QRIS</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('game')">
                    <i class="fas fa-gamepad"></i>
                    <span>Top Up Game</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('vpn')">
                    <i class="fas fa-shield-alt"></i>
                    <span>Layanan VPN</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('tembak_paket')">
                    <i class="fas fa-bolt"></i>
                    <span>Tembak Paket</span>
                </div>
                <div class="quick-action-btn" onclick="quickAction('poin')">
                    <i class="fas fa-star"></i>
                    <span>Klaim Poin</span>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <input type="text" class="message-input" id="messageInput" placeholder="Ketik pertanyaan Anda..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" onclick="sendMessage()" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
                <span style="margin-left: 10px; font-size: 0.9rem; color: var(--text-secondary);">CS sedang mengetik...</span>
            </div>
        </div>

        <!-- FAQ Section - PERBAIKAN: Lebih banyak FAQ -->
        <div class="faq-section">
            <h3 class="faq-title">Pertanyaan Umum</h3>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara top up saldo utama?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Untuk top up saldo utama:<br>
                    1. Klik tombol "Top Up" di saldo utama<br>
                    2. Pilih nominal (min. Rp 10.000)<br>
                    3. Pilih metode pembayaran (QRIS/DANA)<br>
                    4. Unggah bukti pembayaran<br>
                    5. Saldo otomatis ditambahkan setelah verifikasi
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara top up saldo QRIS?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Untuk top up saldo QRIS (rekber):<br>
                    1. Klik tombol "Top Up" di saldo QRIS<br>
                    2. Pilih nominal (min. Rp 10.000)<br>
                    3. Scan QRIS yang tersedia<br>
                    4. Bayar sesuai nominal<br>
                    5. Saldo otomatis masuk setelah pembayaran terdeteksi
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Apa perbedaan saldo utama dan QRIS?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    <strong>Saldo Utama:</strong><br>
                    - Untuk pembelian semua layanan<br>
                    - Top up via transfer manual & QRIS<br>
                    - Upload bukti bayar saldo langsung masuk setelah kirim bukti transfer<br>
                    <br>
                    <strong>Saldo QRIS (Rekber):</strong><br>
                    - Khusus transaksi menggunakan QRIS<br>
                    - Sistem rekening bersama (rekber)<br>
                    - Proses cepat, aman & terpercaya<br>
                    - Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi<br>
                    - Dapat digunakan untuk pencairan paylater, dana cicil dll<br>
                    - Biaya fee hanya 3k saja<br>
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Berapa lama proses top up?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Proses top up:<br>
                    - Saldo Utama: 1-5 menit setelah bukti pembayaran diverifikasi<br>
                    - Saldo QRIS: Instan setelah pembayaran terdeteksi sistem
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara klaim poin?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Poin otomatis terkumpul setiap transaksi. Tukarkan poin di menu "Poin" untuk mendapatkan saldo atau voucher diskon.
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana cara tembak paket?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Cara tembak paket:<br>
                    1. Input nomor yang akan di-dor<br>
                    2. Tunggu hingga ada SMS kode OTP<br>
                    3. Input kode OTP di kolom yang tersedia<br>
                    4. Klik verifikasi untuk menyelesaikan proses<br>
                    <br>
                    Pastikan nomor aktif dan memiliki sinyal yang baik untuk menerima SMS OTP.
                </div>
            </div>
            <!-- FAQ Baru -->
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Apakah ada garansi untuk layanan VPN?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Ya, semua layanan VPN di PX STORE memiliki garansi:<br>
                    - Garansi 7 hari untuk semua jenis VPN<br>
                    - Garansi replace jika akun bermasalah<br>
                    - Support 24/7 untuk bantuan teknis
                </div>
            </div>
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <span>Bagaimana jika transaksi gagal?</span>
                    <i class="fas fa-chevron-down faq-arrow"></i>
                </div>
                <div class="faq-answer">
                    Jika transaksi gagal:<br>
                    1. Cek saldo Anda apakah cukup<br>
                    2. Pastikan koneksi internet stabil<br>
                    3. Jika saldo terpotong tapi transaksi gagal, hubungi CS<br>
                    4. CS akan memproses refund dalam 1x24 jam
                </div>
            </div>
        </div>

        <!-- Contact Options -->
        <div class="contact-options">
            <button class="contact-btn whatsapp-btn" onclick="contactWhatsApp()">
                <i class="fab fa-whatsapp"></i>
                WhatsApp
            </button>
            <button class="contact-btn email-btn" onclick="contactEmail()">
                <i class="fas fa-envelope"></i>
                Email
            </button>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navbar">
        <div class="nav-item" onclick="navigateTo('beranda.html')">
            <i class="fas fa-home"></i>
            <span>Beranda</span>
        </div>

        <div class="nav-item" onclick="navigateTo('riwayat.html')">
            <i class="fas fa-shopping-cart"></i>
            <span>Transaksi</span>
        </div>

        <div class="nav-item center-menu" onclick="navigateTo('server.html')">
            <div class="logo-circle">
                <img src="assets/images/icon.ico" alt="Logo" class="nav-logo">
            </div>
            <span class="menu-title">Server</span>
        </div>

        <div class="nav-item" onclick="navigateTo('profil.html')">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </div>
        <div class="nav-item active" onclick="navigateTo('cs.html')">
            <i class="fas fa-headset"></i>
            <span>Bantuan</span>
        </div>
    </div>

    <script>
        // Knowledge Base untuk CS Otomatis - DIPERBAIKI dan DIPERLUAS
        const knowledgeBase = {
            'greeting': {
                patterns: ['halo', 'hai', 'hi', 'hello', 'selamat pagi', 'selamat siang', 'selamat malam', 'hey', 'hei', 'assalamualaikum'],
                responses: [
                    'Halo! Selamat datang di PX STORE. Ada yang bisa saya bantu? 😊',
                    'Hai! Saya CS PX STORE, siap membantu Anda hari ini! ✨',
                    'Selamat datang! Silakan tanyakan apa yang perlu Anda ketahui tentang layanan kami.',
                    'Halo! Senang bertemu dengan Anda. Ada yang bisa saya bantu hari ini?',
                    'Hai! Terima kasih telah menghubungi CS PX STORE. Ada yang bisa saya bantu?'
                ]
            },
            'topup_utama': {
                patterns: ['cara top up saldo utama', 'top up saldo utama', 'isi saldo utama', 'tambah saldo utama', 'deposit saldo utama', 'cara isi saldo utama', 'bagaimana top up saldo utama'],
                responses: [
                    '**Saldo Utama** adalah saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE.\n\nUntuk top up **Saldo Utama**:\n1. Klik tombol "Top Up" di saldo utama\n2. Pilih nominal (min. Rp 10.000)\n3. Pilih metode pembayaran (QRIS/DANA)\n4. Unggah bukti pembayaran\n5. Saldo langsung masuk setelah kirim bukti transfer\n\nSaldo utama bisa digunakan untuk semua layanan PX STORE.',
                    '**Saldo Utama** adalah saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE.\n\n**Top Up Saldo Utama**:\n- Minimal Rp 10.000\n- Metode: QRIS & DANA\n- Upload bukti bayar, saldo langsung masuk\n- Untuk semua layanan (game, VPN, dll)',
                    'Untuk mengisi **Saldo Utama** di PX STORE:\n\n💰 **Langkah-langkah:**\n1. Buka menu "Saldo Utama"\n2. Pilih "Top Up"\n3. Masukkan nominal (min. 10k)\n4. Pilih metode pembayaran\n5. Upload bukti transfer\n6. Saldo otomatis masuk\n\nSaldo utama bisa digunakan untuk semua transaksi di PX STORE!'
                ]
            },
            'topup_qris': {
                patterns: ['cara top up saldo qris', 'top up saldo qris', 'isi saldo qris', 'tambah saldo qris', 'deposit saldo qris', 'rekber', 'rekening bersama', 'cara isi saldo qris', 'bagaimana top up qris'],
                responses: [
                    'Untuk top up **Saldo QRIS (Rekber)**:\n1. Klik tombol "QRIS"\n2. Anda akan dibawa ke halaman Rekber QRIS\n3. Scan QRIS yang tersedia\n4. Bayar sesuai nominal\n5. Saldo otomatis masuk setelah mengirim bukti pembayaran\n\n**Keuntungan Saldo QRIS:**\n- Sistem rekening bersama (rekber)\n- Proses cepat, aman & terpercaya\n- Biaya fee hanya 3k saja\n- Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi\n- Dapat digunakan untuk pencairan paylater, dana cicil dll',
                    '**Saldo QRIS - Sistem Rekber**:\n💰 Top up via scan QRIS\n💰 Proses instan setelah bayar\n💰 Biaya fee hanya 3k\n💰 Khusus transaksi QRIS\n💰 Dapat digunakan untuk pencairan paylater, dana cicil dll\n\nSaldo QRIS menggunakan sistem rekening bersama untuk keamanan bertransaksi.',
                    '**Saldo QRIS (Rekber)** adalah sistem pembayaran yang aman dan cepat:\n\n📱 **Cara Top Up:**\n1. Pilih menu "Saldo QRIS"\n2. Scan QR Code yang tersedia\n3. Bayar sesuai nominal\n4. Saldo otomatis masuk\n\n✅ **Keunggulan:**\n- Proses instan\n- Biaya hanya 3.000\n- Aman & terpercaya\n- Bisa untuk pencairan paylater'
                ]
            },
            'perbedaan_saldo': {
                patterns: ['perbedaan saldo utama', 'beda saldo utama dan qris', 'saldo utama vs qris', 'apa bedanya saldo', 'perbedaan saldo', 'beda saldo', 'mana yang lebih baik saldo utama atau qris'],
                responses: [
                    '**Perbedaan Saldo Utama vs Saldo QRIS:**\n\n💰 **SALDO UTAMA:**\n- Saldo yang dapat digunakan untuk membeli atau order produk yang ada di aplikasi PX STORE\n- Untuk semua layanan\n- Top up via transfer manual & QRIS\n- Upload bukti bayar saldo langsung masuk setelah kirim bukti transfer\n\n🔐 **SALDO QRIS (REKBER):**\n- Khusus transaksi menggunakan QRIS\n- Sistem rekening bersama (rekber)\n- Proses cepat, aman & terpercaya\n- Dapat digunakan untuk transaksi jika tidak punya QRIS pribadi\n- Dapat digunakan untuk pencairan paylater, dana cicil dll\n- Biaya fee hanya 3k saja\n\nPilih sesuai kebutuhan Anda!',
                    '**Perbandingan Saldo:**\n\n💳 **Saldo Utama:**\n- Untuk semua transaksi\n- Top up via transfer/QRIS\n- Upload bukti bayar\n\n🔒 **Saldo QRIS:**\n- Khusus transaksi QRIS\n- Sistem rekber (aman)\n- Fee 3.000\n- Instan setelah bayar\n\nKeduanya memiliki keunggulan masing-masing!',
                    'Mari bandingkan kedua jenis saldo:\n\n**Saldo Utama:**\n✅ Bisa untuk semua transaksi\n✅ Top up via transfer/QRIS\n✅ Proses 1-5 menit\n\n**Saldo QRIS:**\n✅ Khusus transaksi QRIS\n✅ Sistem rekber yang aman\n✅ Proses instan\n✅ Biaya 3.000\n\nPilih sesuai kebutuhan transaksi Anda!'
                ]
            },
            'game': {
                patterns: ['game', 'top up game', 'free fire', 'mobile legends', 'pubg', 'cod', 'roblox', 'genshin', 'valorant', 'diamond', 'uc', 'cp', 'top up diamond', 'top up uc'],
                responses: [
                    'Untuk top up game di aplikasi PX STORE:\n1. Buka aplikasi PX STORE\n2. Pilih menu "Top Up Game"\n3. Pilih game yang ingin di top up\n4. Masukkan ID game dan server\n5. Pilih nominal top up\n6. Bayar menggunakan saldo utama atau QRIS\n7. Proses otomatis, diamond/UC masuk dalam 1-5 menit\n\n**Game yang tersedia:**\n- Free Fire (Diamond)\n- Mobile Legends (Diamond)\n- PUBG Mobile (UC)\n- Call of Duty Mobile (CP)\n- Roblox\n- Genshin Impact\n- Valorant\n- Dan masih banyak lagi!',
                    '**Top Up Game** di PX STORE:\n\n🎮 **Game yang tersedia:**\n- Free Fire\n- Mobile Legends\n- PUBG Mobile\n- Call of Duty Mobile\n- Roblox\n- Genshin Impact\n- Valorant\n- Dan masih banyak game lainnya!\n\n💰 **Cara top up:**\n1. Pilih game & nominal\n2. Masukkan ID game\n3. Bayar dengan saldo utama/QRIS\n4. Item masuk otomatis dalam 1-5 menit\n\nHarga kompetitif & proses cepat!',
                    '**Layanan Top Up Game** PX STORE:\n\n🔥 **Free Fire** - Diamond\n📱 **Mobile Legends** - Diamond\n🎯 **PUBG Mobile** - UC\n⚔️ **Call of Duty** - CP\n🧩 **Roblox** - Robux\n🌍 **Genshin Impact** - Genesis Crystal\n💥 **Valorant** - Points\n\n**Proses:** Cepat & otomatis\n**Waktu:** 1-5 menit\n**Metode bayar:** Saldo utama atau QRIS\n\nPilih game favorit Anda!'
                ]
            },
            'vpn': {
    patterns: ['vpn', 'layanan vpn', 'akun vpn', 'premium vpn', 'netflix'],
    responses: [
        '**Layanan VPN Premium** di PX STORE:\n\n🌐 **Protocol VPN:**\n- SSH/SSL\n- Trojan\n- VMess\n- VLESS\n\n⚡ Kecepatan tinggi & stabil\n🛡️ Support streaming & gaming\n✅ Garansi 7 hari\n📞 Support 24/7',
        
        '**VPN Premium** PX STORE:\n\n🔒 **Protocol Tersedia:**\n- SSH/SSL\n- Trojan\n- VMess\n- VLESS\n\n⚡ Kecepatan optimal\n🎯 Support semua aktivitas\n✅ Bergaransi 7 hari\n💬 Support 24/7',
        
        '**Layanan VPN Kami:**\n\n🛡️ **Protocol VPN:**\n- SSH/SSL\n- Trojan\n- VMess\n- VLESS\n\n✅ **Fitur:**\n- Koneksi stabil & cepat\n- Support streaming/gaming\n- Garansi 7 hari\n- Support 24/7 via WhatsApp'
    ]
            },
            'tembak_paket': {
                patterns: ['tembak paket', 'dor paket', 'paket internet', 'kuota internet', 'telkomsel', 'xl', 'indosat', 'tri', 'smartfren', 'by.u', 'axis', 'paket murah', 'kuota murah'],
                responses: [
                    '**Layanan Tembak Paket** PX STORE:\n\n📱 **Cara Tembak Paket:**\n1. Input nomor yang akan di-dor\n2. Tunggu hingga ada SMS kode OTP\n3. Input kode OTP di kolom yang tersedia\n4. Klik verifikasi untuk menyelesaikan proses\n\n📶 **Operator yang tersedia:**\n- XL\n\n💡 **Tips:**\n- Pastikan nomor aktif\n- Sinyal harus baik untuk terima SMS OTP\n- Proses biasanya 1-5 menit',
                    '**Tembak Paket Internet** di PX STORE:\n\n📲 **Proses:**\n1. Masukkan nomor HP\n2. Tunggu SMS OTP\n3. Input kode OTP\n4. Paket aktif otomatis\n\n🏪 **Operator Support:**\n- XL\n\n⚡ **Keunggulan:**\n- Harga terjangkau\n- Proses cepat 1-5 menit\n- Beragam pilihan paket\n\nMulai dari Rp 1.000 saja!',
                    '**Tembak Paket Kuota** - PX STORE:\n\n📞 **Cara Order:**\n1. Pilih "Tembak Paket"\n2. Input nomor target\n3. Tunggu SMS OTP\n4. Input kode verifikasi\n5. Paket aktif!\n\n📊 **Operator Tersedia:**\n✅ XL\n\n🚀 **Proses:** Cepat & otomatis\n💰 **Harga:** Terjangkau mulai 1k'
                ]
            },
            'poin': {
                patterns: ['poin', 'klaim poin', 'tukar poin', 'reward poin', 'loyalty poin', 'cara dapat poin', 'cara klaim poin', 'cara tukar poin', 'bagaimana klaim poin'],
                responses: [
                    '**Sistem Poin & Reward** PX STORE:\n\n⭐ **Cara Dapat Poin:**\n- Setiap transaksi mendapatkan poin\n- 1.000 poin = Rp 1.000\n- Poin bisa ditukar jadi saldo atau voucher\n\n🎁 **Cara Klaim Poin:**\n1. Buka menu "Poin"\n2. Pilih "Klaim Poin"\n3. Poin otomatis masuk ke saldo utama\n4. Atau tukar dengan voucher diskon\n\n💎 **Bonus:**\n- Poin tidak kadaluarsa\n- Bisa dikumpulkan tanpa batas\n- Special reward untuk member setia',
                    '**Program Poin PX STORE**\n\n🏆 **Cara Dapat Poin:**\n- Setiap transaksi = dapat poin\n- 1.000 poin = Rp 1.000\n- Tukar jadi saldo atau voucher\n\n🎯 **Cara Klaim:**\n1. Buka menu "Poin"\n2. Pilih "Tukar Poin"\n3. Konfirmasi penukaran\n4. Saldo/voucher langsung aktif\n\n✨ **Keuntungan:**\n- Poin tidak hangus\n- Bisa ditukar kapan saja\n- Reward menarik setiap bulan',
                    '**Reward Poin PX STORE** 🎉\n\n📈 **Cara Dapat Poin:**\n- Transaksi = Dapat poin\n- 1.000 poin = Rp 1.000\n\n🔄 **Cara Tukar:**\n1. Menu "Poin & Reward"\n2. Pilih "Tukar Sekarang"\n3. Konfirmasi penukaran\n4. Saldo/voucher aktif\n\n🎊 **Benefit:**\n- Poin tidak kadaluarsa\n- Bisa dikumpulkan\n- Special bonus bulanan\n\nTukar poin Anda sekarang!'
                ]
            },
            'help': {
                patterns: ['bantuan', 'tolong', 'help', 'bantu', 'support', 'cs', 'customer service', 'cara pakai', 'panduan'],
                responses: [
                    'Tentu, saya siap membantu! 😊\n\nAnda bisa menanyakan tentang:\n- Top up saldo utama/QRIS\n- Perbedaan saldo utama & QRIS\n- Top up game (Free Fire, ML, dll)\n- Layanan VPN & akun premium\n- Tembak paket internet\n- Klaim poin & reward\n- Atau tanyakan langsung ke CS via WhatsApp\n\nPilih menu di bawah atau ketik pertanyaan Anda!',
                    'Saya di sini untuk membantu Anda! ✨\n\n**Layanan yang tersedia:**\n💰 Top up saldo\n🎮 Top up game\n🔒 VPN & akun premium\n📱 Tembak paket\n⭐ Klaim poin\n\nKetik pertanyaan atau pilih menu quick action di atas!',
                    'Halo! Saya CS virtual PX STORE. Saya bisa membantu dengan:\n\n📊 **Informasi Saldo**\n🎮 **Top Up Game**\n🛡️ **Layanan VPN**\n📶 **Tembak Paket**\n🎁 **Reward Poin**\n\nSilakan tanyakan apa yang Anda butuhkan!'
                ]
            },
            'payment': {
                patterns: ['pembayaran', 'bayar', 'metode bayar', 'cara bayar', 'transfer', 'qris', 'dana', 'gopay', 'ovo', 'linkaja', 'shopee pay'],
                responses: [
                    '**Metode Pembayaran** di PX STORE:\n\n💳 **Saldo Utama:**\n- Transfer bank (BCA, BNI, BRI, Mandiri)\n- QRIS (semua e-wallet)\n- DANA\n\n📱 **Saldo QRIS (Rekber):**\n- Scan QRIS langsung\n- Semua e-wallet support QRIS\n\n⚡ **Proses:**\n- Saldo utama: 1-5 menit setelah upload bukti\n- Saldo QRIS: Instan setelah bayar\n\nPilih metode yang paling nyaman untuk Anda!',
                    '**Pilihan Pembayaran** PX STORE:\n\n💰 **Saldo Utama:**\n- Transfer bank\n- QRIS\n- DANA\n\n🔐 **Saldo QRIS:**\n- Scan QRIS\n- Semua e-wallet\n\n🚀 **Kecepatan:**\n- Saldo utama: 1-5 menit\n- Saldo QRIS: Instan\n\nSemua metode aman & terpercaya!',
                    '**Cara Bayar di PX STORE:**\n\n1. **Saldo Utama:**\n   - Transfer bank/QRIS/DANA\n   - Upload bukti, saldo masuk 1-5 menit\n\n2. **Saldo QRIS:**\n   - Scan QRIS\n   - Bayar, saldo masuk instan\n\nPilih sesuai kebutuhan Anda!'
                ]
            },
            'problem': {
                patterns: ['masalah', 'error', 'gagal', 'gak bisa', 'tidak bisa', 'kenapa', 'mengapa', 'kendala', 'masalah transaksi', 'transaksi gagal'],
                responses: [
                    'Maaf mendengar Anda mengalami kendala. 😔\n\n**Solusi umum:**\n1. Pastikan koneksi internet stabil\n2. Cek saldo apakah mencukupi\n3. Restart aplikasi jika perlu\n4. Pastikan nomor/ID game benar\n\nJika transaksi gagal tapi saldo terpotong:\n- Hubungi CS via WhatsApp\n- Sertakan bukti transaksi\n- CS akan proses refund dalam 1x24 jam\n\nButuh bantuan lebih lanjut? Hubungi CS langsung!',
                    'Oh tidak, ada masalah ya? 😟\n\n**Troubleshooting:**\n📶 Cek koneksi internet\n💰 Pastikan saldo cukup\n🔄 Restart aplikasi\n📱 Pastikan data benar\n\n**Jika saldo terpotong tapi transaksi gagal:**\n- Screenshoot bukti\n- Hubungi CS WhatsApp\n- Refund diproses 1x24 jam\n\nCS siap membantu 24/7!',
                    'Saya turut prihatin dengan kendala Anda. 😔\n\n**Langkah perbaikan:**\n1. Cek koneksi internet\n2. Pastikan saldo mencukupi\n3. Restart aplikasi\n4. Cek input data\n\n**Transaksi gagal?**\n- Screenshoot error\n- Hubungi CS WhatsApp\n- Refund 1x24 jam\n\nJangan ragu hubungi CS untuk bantuan!'
                ]
            },
            'thanks': {
                patterns: ['terima kasih', 'thanks', 'thank you', 'makasih', 'thx', 'terimakasih', 'sukses selalu', 'good job'],
                responses: [
                    'Sama-sama! Terima kasih sudah menggunakan layanan PX STORE. 😊\n\nJika ada pertanyaan lain, jangan ragu untuk menghubungi kami. Semoga harimu menyenangkan! ✨',
                    'Terima kasih kembali! Senang bisa membantu Anda. 🤗\n\nJangan lupa cek promo terbaru di aplikasi PX STORE. Have a great day! 🌟',
                    'Sama-sama! Terima kasih atas kepercayaannya menggunakan PX STORE. 🎉\n\nJika butuh bantuan lagi, saya selalu siap membantu. Stay awesome! 💫'
                ]
            },
            'goodbye': {
                patterns: ['bye', 'goodbye', 'sampai jumpa', 'dadah', 'dah', 'selamat tinggal', 'sampai nanti', 'see you'],
                responses: [
                    'Sampai jumpa! Terima kasih sudah menghubungi CS PX STORE. 😊\n\nJangan ragu kembali jika butuh bantuan. Have a wonderful day! 🌈',
                    'Dadah! Semoga harimu menyenangkan. ✨\n\nIngat, CS PX STORE selalu siap membantu kapan saja. Sampai ketemu lagi! 👋',
                    'Sampai jumpa! Terima kasih telah berkunjung ke PX STORE. 🎉\n\nJangan lupa cek promo menarik lainnya. See you! 🌟'
                ]
            },
            'default': {
                responses: [
                    'Maaf, saya belum paham pertanyaan Anda. 😅\n\nAnda bisa menanyakan tentang:\n- Top up saldo utama/QRIS\n- Perbedaan saldo utama & QRIS\n- Top up game\n- Layanan VPN\n- Tembak paket\n- Klaim poin\n\nAtau hubungi CS langsung via WhatsApp untuk bantuan lebih lanjut!',
                    'Saya belum mengerti pertanyaan tersebut. 🤔\n\nMungkin Anda bisa menanyakan:\n- Cara top up saldo\n- Layanan game/VPN\n- Tembak paket internet\n- Klaim reward poin\n\nPilih menu quick action atau tanyakan ke CS via WhatsApp!',
                    'Maaf, saya tidak yakin memahami maksud Anda. 😊\n\nSilakan tanyakan tentang:\n💰 Top up saldo\n🎮 Top up game\n🔒 Layanan VPN\n📱 Tembak paket\n⭐ Klaim poin\n\nAtau gunakan menu bantuan di atas!'
                ]
            }
        };

        // Inisialisasi chat
        document.addEventListener('DOMContentLoaded', function() {
            // Tambahkan pesan selamat datang
            addBotMessage("Halo! 👋 Saya CS PX STORE. Ada yang bisa saya bantu hari ini?");
            
            // Scroll ke bawah chat container
            scrollToBottom();
        });

        // Fungsi untuk menambahkan pesan bot
        function addBotMessage(text) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot-message';
            
            // Format teks dengan line breaks
            const formattedText = text.replace(/\n/g, '<br>');
            
            // Tambahkan waktu
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            
            messageDiv.innerHTML = `
                <div>${formattedText}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // Fungsi untuk menambahkan pesan pengguna
        function addUserMessage(text) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            
            // Tambahkan waktu
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            
            messageDiv.innerHTML = `
                <div>${text}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        // Fungsi untuk scroll ke bawah chat
        function scrollToBottom() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Fungsi untuk mengirim pesan
        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message === '') return;
            
            // Tambahkan pesan pengguna
            addUserMessage(message);
            messageInput.value = '';
            
            // Tampilkan typing indicator
            showTypingIndicator();
            
            // Simulasikan waktu pemrosesan AI
            setTimeout(() => {
                hideTypingIndicator();
                processUserMessage(message);
            }, 1500);
        }

        // Fungsi untuk menangani tombol enter
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Fungsi untuk menampilkan indikator mengetik
        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'flex';
            scrollToBottom();
        }

        // Fungsi untuk menyembunyikan indikator mengetik
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'none';
        }

        // Fungsi untuk memproses pesan pengguna dan memberikan respons
        function processUserMessage(message) {
            const lowerMessage = message.toLowerCase();
            let response = null;
            
            // Cari kecocokan dengan knowledge base
            for (const [key, data] of Object.entries(knowledgeBase)) {
                if (key === 'default') continue;
                
                for (const pattern of data.patterns) {
                    if (lowerMessage.includes(pattern)) {
                        // Pilih respons acak dari array respons
                        const randomIndex = Math.floor(Math.random() * data.responses.length);
                        response = data.responses[randomIndex];
                        break;
                    }
                }
                
                if (response) break;
            }
            
            // Jika tidak ada kecocokan, gunakan respons default
            if (!response) {
                const randomIndex = Math.floor(Math.random() * knowledgeBase.default.responses.length);
                response = knowledgeBase.default.responses[randomIndex];
            }
            
            // Tambahkan respons bot
            addBotMessage(response);
        }

        // Fungsi untuk aksi cepat
        function quickAction(action) {
            let message = '';
            
            switch(action) {
                case 'topup_utama':
                    message = 'cara top up saldo utama';
                    break;
                case 'topup_qris':
                    message = 'cara top up saldo qris';
                    break;
                case 'game':
                    message = 'top up game';
                    break;
                case 'vpn':
                    message = 'layanan vpn';
                    break;
                case 'tembak_paket':
                    message = 'tembak paket';
                    break;
                case 'poin':
                    message = 'cara klaim poin';
                    break;
            }
            
            // Tambahkan pesan pengguna
            addUserMessage(message);
            
            // Tampilkan typing indicator
            showTypingIndicator();
            
            // Simulasikan waktu pemrosesan AI
            setTimeout(() => {
                hideTypingIndicator();
                processUserMessage(message);
            }, 1500);
        }

    // Fungsi untuk menambahkan pesan bot - DIPERBAIKI untuk bold text
    function addBotMessage(text) {
        const chatContainer = document.getElementById('chatContainer');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message bot-message';
        
        // Format teks dengan line breaks dan bold text - PERBAIKAN
        const formattedText = formatBotText(text);
        
        // Tambahkan waktu
        const now = new Date();
        const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                          now.getMinutes().toString().padStart(2, '0');
        
        messageDiv.innerHTML = `
            <div>${formattedText}</div>
            <div class="message-time">${timeString}</div>
        `;
        
        chatContainer.appendChild(messageDiv);
        scrollToBottom();
    }

    // Fungsi baru untuk format teks bot - PERBAIKAN UTAMA
    function formatBotText(text) {
        // Ganti **teks** dengan <strong>teks</strong>
        let formatted = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        
        // Ganti line breaks dengan <br>
        formatted = formatted.replace(/\n/g, '<br>');
        
        return formatted;
    }

    // Fungsi untuk menambahkan pesan pengguna
    function addUserMessage(text) {
        const chatContainer = document.getElementById('chatContainer');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message user-message';
        
        // Tambahkan waktu
        const now = new Date();
        const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                          now.getMinutes().toString().padStart(2, '0');
        
        messageDiv.innerHTML = `
            <div>${text}</div>
            <div class="message-time">${timeString}</div>
        `;
        
        chatContainer.appendChild(messageDiv);
        scrollToBottom();
    }

    // Tambahkan CSS untuk bold text di pesan bot
    const style = document.createElement('style');
    style.textContent = `
        .bot-message strong {
            color: var(--primary);
            font-weight: 600;
        }
    `;
    document.head.appendChild(style);

        // Fungsi untuk aksi saran
        function suggestionAction(suggestion) {
            // Tambahkan pesan pengguna
            addUserMessage(suggestion);
            
            // Tampilkan typing indicator
            showTypingIndicator();
            
            // Simulasikan waktu pemrosesan AI
            setTimeout(() => {
                hideTypingIndicator();
                processUserMessage(suggestion);
            }, 1500);
        }

        // Fungsi untuk toggle FAQ
        function toggleFAQ(element) {
            element.classList.toggle('active');
        }

        // Fungsi untuk kontak WhatsApp
        function contactWhatsApp() {
            window.open('https://wa.me/6283151636921?text=Halo%20CS%20PX%20STORE,%20saya%20butuh%20bantuan', '_blank');
        }

        // Fungsi untuk kontak Email
        function contactEmail() {
            window.location.href = 'mailto:peyxdev@gmail.com?subject=Bantuan%20CS%20PX%20STORE';
        }

        // Fungsi untuk navigasi
        function navigateTo(page) {
            window.location.href = 'beranda.html';
        }

        // Fungsi untuk kembali
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>