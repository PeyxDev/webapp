<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/assets/images/icon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>Tembak Paket Axis - PX STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS tetap sama seperti sebelumnya */
        :root {
            --primary: #6c63ff;
            --primary-dark: #564fd8;
            --secondary: #4d44db;
            --accent: #9d4edd;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-hover: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            overflow-x: hidden;
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            padding-bottom: 80px;
            touch-action: manipulation;
            font-size: 16px;
        }
        
        .app-container {
            padding: 15px;
            padding-bottom: 80px;
            max-width: 500px;
            margin: 0 auto;
            width: 100%;
            overflow: hidden;
        }
        
        /* Header */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            padding-top: 10px;
        }
        
        .back-button {
            display: flex;
            align-items: center;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.875rem;
            margin-bottom: 15px;
        }
        
        .back-button i {
            margin-right: 8px;
        }
        
        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .page-title img {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            border-radius: 8px;
        }
        
        /* Warning Box */
        .warning-box {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #ff3838;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        
        .warning-title {
            font-weight: 600;
            color: white;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .warning-title i {
            margin-right: 8px;
            font-size: 1rem;
        }
        
        .warning-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.8rem;
            line-height: 1.4;
        }
        
        /* Info Saldo */
        .balance-info {
            background-color: var(--dark-card);
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .balance-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .balance-value {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.1rem;
        }
        
        /* Input Nomor HP */
        .phone-container {
            margin-bottom: 15px;
        }
        
        .phone-input-group {
            display: flex;
            align-items: center;
            background-color: var(--dark-card);
            border-radius: 10px;
            padding: 12px 15px;
        }
        
        .phone-input-group i {
            color: var(--text-secondary);
            margin-right: 10px;
        }
        
        .phone-input-group input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            width: 100%;
            outline: none;
            font-size: 16px;
        }
        
        .phone-input-group input::placeholder {
            color: var(--text-secondary);
        }
        
        /* Tombol Kirim OTP */
        .send-otp-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        
        .send-otp-button:hover {
            background-color: var(--primary-dark);
        }
        
        .send-otp-button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        /* Input OTP */
        .otp-container {
            margin-bottom: 20px;
            display: none;
        }
        
        .otp-input-group {
            display: flex;
            align-items: center;
            background-color: var(--dark-card);
            border-radius: 10px;
            padding: 12px 15px;
        }
        
        .otp-input-group i {
            color: var(--text-secondary);
            margin-right: 10px;
        }
        
        .otp-input-group input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            width: 100%;
            outline: none;
            font-size: 16px;
        }
        
        .otp-input-group input::placeholder {
            color: var(--text-secondary);
        }
        
        /* Tombol Verifikasi OTP */
        .verify-otp-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s;
            white-space: nowrap;
        }
        
        .verify-otp-button:hover {
            background-color: var(--primary-dark);
        }
        
        .verify-otp-button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        .otp-info {
            background-color: rgba(108, 99, 255, 0.1);
            border-radius: 8px;
            padding: 10px 15px;
            margin-top: 8px;
            border-left: 3px solid var(--primary);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .otp-info i {
            color: var(--primary);
            margin-right: 5px;
        }
        
        /* Pencarian dengan icon */
        .search-icon {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background-color: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: var(--box-shadow);
            z-index: 999;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .search-icon:hover {
            background-color: var(--primary-dark);
            transform: scale(1.1);
        }
        
        /* Product List - Tembak Paket */
        .product-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .product-item {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
            position: relative;
        }
        
        .product-item:hover {
            background-color: var(--dark-hover);
            transform: translateY(-2px);
        }
        
        .product-item.hot::before {
            content: "HOT";
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(45deg, #ff5252, #ff4081);
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 10px;
            z-index: 1;
        }
        
        .product-name {
            font-weight: 500;
            font-size: 0.875rem;
            line-height: 1.4;
            margin-bottom: 8px;
        }
        
        .product-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 8px 0;
        }
        
        .product-details {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .product-stock {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            margin-top: 5px;
        }
        
        .stock-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #4caf50;
            margin-right: 5px;
        }
        
        .stock-dot.out-of-stock {
            background-color: #f44336;
        }
        
        .tembak-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 8px;
            transition: background-color 0.3s;
        }
        
        .tembak-button:hover {
            background-color: var(--primary-dark);
        }
        
        .tembak-button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: var(--dark-card);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            padding: 10px 0;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            z-index: 1000;
        }

        .center-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .logo-circle {
            background-color: #7540f1;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }

        .nav-logo {
            height: 40px;
        }

        .menu-title {
            font-size: 0.75rem;
            color: #a3a1a1;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.625rem;
            cursor: pointer;
            flex: 1;
        }
        
        .nav-item i {
            font-size: 1.25rem;
            margin-bottom: 3px;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item span {
            font-size: 0.6875rem;
            font-weight: 500;
        }
        
        /* Modal Loading */
        .loading-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .loading-container {
            background-color: var(--dark-card);
            border-radius: 20px;
            padding: 30px;
            max-width: 300px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .loading-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            animation: pulse 1.5s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .loading-subtext {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 3px;
            width: 0%;
            animation: progress 3s ease-in-out forwards;
        }
        
        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        /* Modal Success */
        .success-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .success-container {
            background-color: var(--dark-card);
            border-radius: 20px;
            padding: 30px;
            max-width: 300px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease;
        }
        
        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background-color: rgba(76, 175, 80, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4caf50;
            font-size: 40px;
            animation: successScale 0.5s ease;
        }
        
        @keyframes successScale {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .success-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .success-subtext {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .points-earned {
            display: inline-flex;
            align-items: center;
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            margin: 15px 0;
        }
        
        .points-earned i {
            margin-right: 5px;
        }
        
        .success-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        
        .success-button:hover {
            background-color: var(--primary-dark);
        }
        
        /* Popup Peringatan */
        .warning-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2500;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .warning-container {
            background-color: var(--dark-card);
            border-radius: 12px;
            max-width: 300px;
            width: 90%;
            padding: 20px;
            text-align: center;
            box-shadow: var(--box-shadow);
            animation: slideUp 0.4s ease;
        }
        
        .warning-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            background-color: rgba(255, 193, 7, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffc107;
            font-size: 30px;
        }
        
        .warning-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .warning-subtext {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .warning-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        .warning-button:hover {
            background-color: var(--primary-dark);
        }
        
        /* Modal Invalid Modern */
        .invalid-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .invalid-container {
            background-color: var(--dark-card);
            border-radius: 20px;
            padding: 30px;
            max-width: 300px;
            width: 90%;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease;
        }
        
        .invalid-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background-color: rgba(244, 67, 54, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #f44336;
            font-size: 40px;
            animation: invalidScale 0.5s ease;
        }
        
        @keyframes invalidScale {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .invalid-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .invalid-subtext {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .invalid-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        
        .invalid-button:hover {
            background-color: var(--primary-dark);
        }
        
        /* Modal Pencarian */
        .search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .search-modal-container {
            background-color: var(--dark-card);
            border-radius: 12px;
            max-width: 400px;
            width: 100%;
            box-shadow: var(--box-shadow);
            animation: modalFadeIn 0.3s ease;
            overflow: hidden;
        }
        
        .search-header {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }
        
        .search-title {
            font-size: 1.1rem;
            font-weight: 600;
            flex: 1;
        }
        
        .search-close {
            cursor: pointer;
            font-size: 1.3rem;
            color: var(--text-secondary);
        }
        
        .search-input-container {
            padding: 20px;
        }
        
        .search-input-group {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 15px;
        }
        
        .search-input-group i {
            color: var(--text-secondary);
            margin-right: 10px;
        }
        
        .search-input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            width: 100%;
            outline: none;
            font-size: 16px;
        }
        
        .search-input::placeholder {
            color: var(--text-secondary);
        }
        
        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .search-result-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .search-result-name {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .search-result-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--text-secondary);
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }
            
            .app-container {
                padding: 10px;
                padding-bottom: 70px;
            }
            
            .product-list {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .product-name {
                font-size: 0.8125rem;
            }
            
            .product-price {
                font-size: 1.1rem;
            }
            
            .phone-input-group input,
            .otp-input-group input,
            .search-input {
                font-size: 16px;
            }
            
            .loading-container, .success-container, .invalid-container {
                padding: 25px;
                max-width: 280px;
            }
            
            .loading-icon, .success-icon, .invalid-icon {
                width: 70px;
                height: 70px;
            }
            
            .loading-spinner {
                width: 50px;
                height: 50px;
            }
            
            .warning-container {
                max-width: 280px;
                padding: 15px;
            }
            
            .warning-icon {
                width: 50px;
                height: 50px;
                font-size: 25px;
            }
        }
        
        @media (max-width: 360px) {
            .app-container {
                padding: 10px;
                padding-bottom: 70px;
            }
            
            .product-list {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            .product-item {
                padding: 12px;
            }
            
            .product-name {
                font-size: 0.75rem;
            }
            
            .product-price {
                font-size: 1rem;
            }
            
            .nav-item i {
                font-size: 1.125rem;
            }
            
            .nav-item span {
                font-size: 0.625rem;
            }
            
            .loading-container, .success-container, .invalid-container {
                padding: 20px;
                max-width: 260px;
            }
            
            .warning-container {
                max-width: 260px;
                padding: 15px;
            }
        }
        
        @media screen and (max-width: 767px) {
            input, select, textarea {
                font-size: 16px !important;
            }
        }
        
        a, button, input, .product-item {
            touch-action: manipulation;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header-top">
            <div class="header-left"></div>
            <div class="header-right"></div>
        </div>

        <a href="index.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Kembali ke Beranda
        </a>

        <div class="page-title">
            <img src="assets/images/xl.png" alt="Axis">
            <span>Tembak Paket XL</span>
        </div>

        <!-- Warning Box -->
        <div class="warning-box">
            <div class="warning-title">
                <i class="fas fa-exclamation-triangle"></i>
                PERINGATAN PENTING!
            </div>
            <div class="warning-text">
                Paket ini NON RESMI. Membeli berarti Anda mengerti dan paham: 
                <strong>Setelah paket sudak masuk berarti DONE NO GARANSI - NO REFUND</strong>. 
                Silahkan input nomor HP dan tunggu OTP verifikasi, lalu langsung input di kolom OTP.
            </div>
        </div>

        <!-- Info Saldo -->
        <div class="balance-info">
            <span class="balance-label">Saldo Anda:</span>
            <span class="balance-value" id="balance-display">Rp 0</span>
        </div>

        <!-- Input nomor HP -->
        <div class="phone-container">
            <div class="phone-input-group">
                <i class="fas fa-phone"></i>
                <input type="text" placeholder="Masukkan nomor HP..." id="phone-input" maxlength="13">
                <button class="send-otp-button" id="send-otp-button">Kirim OTP</button>
            </div>
        </div>

        <!-- Input OTP -->
        <div class="otp-container" id="otp-container">
            <div class="otp-input-group">
                <i class="fas fa-key"></i>
                <input type="text" placeholder="Masukkan OTP yang diterima..." id="otp-input" maxlength="6">
                <button class="verify-otp-button" id="verify-otp-button">Verifikasi</button>
            </div>
            <div class="otp-info">
                <i class="fas fa-info-circle"></i>
                OTP akan dikirim via SMS ke nomor HP yang diinput. Tunggu beberapa saat.
            </div>
        </div>

        <div class="product-list" id="product-list">
            <!-- Produk akan dimuat di sini oleh JavaScript -->
        </div>
        
        <!-- Icon pencarian -->
        <div class="search-icon" id="search-icon">
            <i class="fas fa-search"></i>
        </div>
    </div>

    <!-- Modal Loading -->
    <div class="loading-modal" id="loading-modal">
        <div class="loading-container">
            <div class="loading-icon">
                <img src="assets/images/icon.ico" alt="PX Store">
            </div>
            <div class="loading-text">Menembak Paket</div>
            <div class="loading-subtext">Sedang memproses permintaan Anda...</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Modal Success -->
    <div class="success-modal" id="success-modal">
        <div class="success-container">
            <div class="success-icon">
                <i class="fas fa-check"></i>
            </div>
            <div class="success-text">Paket Berhasil Ditembak!</div>
            <div class="success-subtext">Paket akan aktif dalam beberapa menit</div>
            <div class="points-earned">
                <i class="fas fa-star"></i>+<span id="success-points-value">0</span> Poin!
            </div>
            <button class="success-button" id="close-success-modal">Tutup</button>
        </div>
    </div>

    <!-- Modal Invalid -->
    <div class="invalid-modal" id="invalid-modal">
        <div class="invalid-container">
            <div class="invalid-icon">
                <i class="fas fa-times"></i>
            </div>
            <div class="invalid-text" id="invalid-title">OTP Tidak Valid</div>
            <div class="invalid-subtext" id="invalid-message">Kode OTP yang Anda masukkan tidak valid. Silakan coba lagi.</div>
            <button class="invalid-button" id="close-invalid-modal">Tutup</button>
        </div>
    </div>

    <!-- Modal Pencarian -->
    <div class="search-modal" id="search-modal">
        <div class="search-modal-container">
            <div class="search-header">
                <div class="search-title">Cari Paket</div>
                <div class="search-close" id="close-search-modal">Ã—</div>
            </div>
            
            <div class="search-input-container">
                <div class="search-input-group">
                    <i class="fas fa-search"></i>
                    <input type="text" class="search-input" id="search-input" placeholder="Cari paket...">
                </div>
                
                <div class="search-results" id="search-results">
                    <!-- Hasil pencarian akan muncul di sini -->
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Peringatan -->
    <div class="warning-popup" id="warning-popup">
        <div class="warning-container">
            <div class="warning-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="warning-text">Nomor HP Belum Diisi</div>
            <div class="warning-subtext">Silakan masukkan nomor HP Anda terlebih dahulu.</div>
            <button class="warning-button" id="close-warning-popup">OK</button>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navbar">
        <div class="nav-item" onclick="navigateTo('beranda.html')">
            <i class="fas fa-home"></i>
            <span>Beranda</span>
        </div>

        <div class="nav-item" onclick="navigateTo('riwayat.html')">
            <i class="fas fa-shopping-cart"></i>
            <span>Riwayat</span>
        </div>

        <div class="nav-item center-menu" onclick="navigateTo('server.html')">
            <div class="logo-circle">
                <img src="assets/images/icon.ico" alt="Logo" class="nav-logo">
            </div>
            <span class="menu-title">Server</span>
        </div>

        <div class="nav-item" onclick="navigateTo('profil.html')">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </div>

        <div class="nav-item" onclick="navigateTo('bantuan.html')">
            <i class="fas fa-headset"></i>
            <span>Bantuan</span>
        </div>
    </div>

    <script>
        // Data produk
        const products = [
            { id: 1, name: "AXIS 1GB 7 Hari", price: 5000, quota: "1GB", validity: "7 Hari", stock: 10, hot: true },
            { id: 2, name: "AXIS 2GB 3 Hari", price: 7000, quota: "2GB", validity: "3 Hari", stock: 15, hot: false },
            { id: 3, name: "AXIS 3GB 7 Hari", price: 10000, quota: "3GB", validity: "7 Hari", stock: 8, hot: true },
            { id: 4, name: "AXIS 5GB 30 Hari", price: 15000, quota: "5GB", validity: "30 Hari", stock: 12, hot: false },
            { id: 5, name: "AXIS 10GB 30 Hari", price: 25000, quota: "10GB", validity: "30 Hari", stock: 5, hot: true },
            { id: 6, name: "AXIS 15GB 30 Hari", price: 35000, quota: "15GB", validity: "30 Hari", stock: 7, hot: false },
            { id: 7, name: "AXIS 25GB 30 Hari", price: 50000, quota: "25GB", validity: "30 Hari", stock: 3, hot: false },
            { id: 8, name: "AXIS 50GB 30 Hari", price: 75000, quota: "50GB", validity: "30 Hari", stock: 2, hot: true },
            { id: 9, name: "AXIS 1GB 1 Hari", price: 3000, quota: "1GB", validity: "1 Hari", stock: 20, hot: false },
            { id: 10, name: "AXIS 2GB 1 Hari", price: 5000, quota: "2GB", validity: "1 Hari", stock: 18, hot: false },
            { id: 11, name: "AXIS 5GB 7 Hari", price: 12000, quota: "5GB", validity: "7 Hari", stock: 10, hot: false },
            { id: 12, name: "AXIS 8GB 30 Hari", price: 20000, quota: "8GB", validity: "30 Hari", stock: 6, hot: true }
        ];

        // DOM Elements
        const phoneInput = document.getElementById('phone-input');
        const otpInput = document.getElementById('otp-input');
        const sendOtpButton = document.getElementById('send-otp-button');
        const verifyOtpButton = document.getElementById('verify-otp-button');
        const otpContainer = document.getElementById('otp-container');
        const productList = document.getElementById('product-list');
        const searchIcon = document.getElementById('search-icon');
        const searchModal = document.getElementById('search-modal');
        const closeSearchModal = document.getElementById('close-search-modal');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        const loadingModal = document.getElementById('loading-modal');
        const successModal = document.getElementById('success-modal');
        const closeSuccessModal = document.getElementById('close-success-modal');
        const invalidModal = document.getElementById('invalid-modal');
        const closeInvalidModal = document.getElementById('close-invalid-modal');
        const warningPopup = document.getElementById('warning-popup');
        const closeWarningPopup = document.getElementById('close-warning-popup');
        const balanceDisplay = document.getElementById('balance-display');

        // State variables
        let otpSent = false;
        let otpVerified = false;
        let currentPhoneNumber = '';
        let generatedOtp = '';

        // Initialize the page
        function init() {
            renderProducts();
            updateBalance();
            setupEventListeners();
        }

        // Render products to the page
        function renderProducts() {
            productList.innerHTML = '';
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = `product-item ${product.hot ? 'hot' : ''}`;
                
                productItem.innerHTML = `
                    <div class="product-name">${product.name}</div>
                    <div class="product-details">${product.quota} | ${product.validity}</div>
                    <div class="product-price">Rp ${product.price.toLocaleString('id-ID')}</div>
                    <div class="product-stock">
                        <span class="stock-dot ${product.stock > 0 ? '' : 'out-of-stock'}"></span>
                        ${product.stock > 0 ? 'Tersedia' : 'Habis'}
                    </div>
                    <button class="tembak-button" ${product.stock > 0 ? '' : 'disabled'}>
                        ${product.stock > 0 ? 'BELI SEKARANG' : 'STOK HABIS'}
                    </button>
                `;
                
                // Add event listener to the buy button
                const buyButton = productItem.querySelector('.tembak-button');
                if (product.stock > 0) {
                    buyButton.addEventListener('click', () => {
                        handleBuyProduct(product);
                    });
                }
                
                productList.appendChild(productItem);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Send OTP button
            sendOtpButton.addEventListener('click', sendOtp);
            
            // Verify OTP button
            verifyOtpButton.addEventListener('click', verifyOtp);
            
            // Search icon
            searchIcon.addEventListener('click', openSearchModal);
            
            // Close search modal
            closeSearchModal.addEventListener('click', closeSearchModalHandler);
            
            // Search input
            searchInput.addEventListener('input', handleSearch);
            
            // Close success modal
            closeSuccessModal.addEventListener('click', () => {
                successModal.style.display = 'none';
            });
            
            // Close invalid modal
            closeInvalidModal.addEventListener('click', () => {
                invalidModal.style.display = 'none';
            });
            
            // Close warning popup
            closeWarningPopup.addEventListener('click', () => {
                warningPopup.style.display = 'none';
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target === searchModal) {
                    closeSearchModalHandler();
                }
                if (event.target === warningPopup) {
                    warningPopup.style.display = 'none';
                }
            });
        }

        // Send OTP function
        function sendOtp() {
            const phoneNumber = phoneInput.value.trim();
            
            if (!phoneNumber) {
                showWarningPopup('Nomor HP Belum Diisi', 'Silakan masukkan nomor HP Anda terlebih dahulu.');
                return;
            }
            
            if (phoneNumber.length < 10 || phoneNumber.length > 13) {
                showWarningPopup('Nomor HP Tidak Valid', 'Nomor HP harus terdiri dari 10-13 digit.');
                return;
            }
            
            // Simulate sending OTP
            currentPhoneNumber = phoneNumber;
            generatedOtp = generateRandomOtp();
            
            // Show loading
            showLoadingModal('Mengirim OTP...', 'OTP sedang dikirim ke nomor Anda');
            
            // Simulate API call delay
            setTimeout(() => {
                hideLoadingModal();
                
                // Show OTP input
                otpContainer.style.display = 'block';
                otpSent = true;
                
                // In a real app, you would send the OTP to the user's phone
                // For demo purposes, we'll show it in an alert
                alert(`OTP untuk ${phoneNumber}: ${generatedOtp}`);
            }, 2000);
        }

        // Verify OTP function
        function verifyOtp() {
            const enteredOtp = otpInput.value.trim();
            
            if (!enteredOtp) {
                showInvalidModal('OTP Belum Diisi', 'Silakan masukkan kode OTP yang Anda terima.');
                return;
            }
            
            if (enteredOtp.length !== 6) {
                showInvalidModal('OTP Tidak Valid', 'Kode OTP harus terdiri dari 6 digit.');
                return;
            }
            
            // Show loading
            showLoadingModal('Memverifikasi OTP...', 'Sedang memverifikasi kode OTP Anda');
            
            // Simulate API call delay
            setTimeout(() => {
                hideLoadingModal();
                
                if (enteredOtp === generatedOtp) {
                    // OTP is correct
                    otpVerified = true;
                    showSuccessModal('OTP Berhasil Diverifikasi', 'Nomor HP Anda telah terverifikasi. Silakan pilih paket untuk dipesan.');
                    
                    // Scroll to product list
                    setTimeout(() => {
                        productList.scrollIntoView({ behavior: 'smooth' });
                    }, 500);
                } else {
                    // OTP is incorrect
                    showInvalidModal('OTP Tidak Valid', 'Kode OTP yang Anda masukkan tidak valid. Silakan coba lagi.');
                }
            }, 2000);
        }

        // Handle buying a product
        function handleBuyProduct(product) {
            if (!otpVerified) {
                showWarningPopup('Verifikasi Diperlukan', 'Silakan verifikasi nomor HP Anda terlebih dahulu sebelum memesan paket.');
                return;
            }
            
            // Check balance
            const currentBalance = getCurrentBalance();
            if (currentBalance < product.price) {
                showInvalidModal('Saldo Tidak Cukup', `Saldo Anda tidak cukup untuk membeli paket ini. Anda memerlukan Rp ${product.price.toLocaleString('id-ID')}.`);
                return;
            }
            
            // Show loading
            showLoadingModal('Memproses Pesanan...', `Sedang menembak paket ${product.name}`);
            
            // Simulate API call delay
            setTimeout(() => {
                hideLoadingModal();
                
                // Deduct balance
                updateBalance(currentBalance - product.price);
                
                // Show success
                showSuccessModal('Paket Berhasil Ditembak!', `Paket ${product.name} berhasil dipesan untuk nomor ${currentPhoneNumber}. Paket akan aktif dalam beberapa menit.`);
                
                // Reset OTP state for next purchase
                otpSent = false;
                otpVerified = false;
                otpContainer.style.display = 'none';
                phoneInput.value = '';
                otpInput.value = '';
            }, 3000);
        }

        // Generate random OTP
        function generateRandomOtp() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Search functionality
        function openSearchModal() {
            searchModal.style.display = 'flex';
            searchInput.focus();
        }

        function closeSearchModalHandler() {
            searchModal.style.display = 'none';
            searchInput.value = '';
            searchResults.innerHTML = '';
        }

        function handleSearch() {
            const query = searchInput.value.toLowerCase().trim();
            searchResults.innerHTML = '';
            
            if (!query) {
                return;
            }
            
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(query) || 
                product.quota.toLowerCase().includes(query)
            );
            
            if (filteredProducts.length === 0) {
                searchResults.innerHTML = '<div class="no-results">Tidak ada hasil ditemukan</div>';
                return;
            }
            
            filteredProducts.forEach(product => {
                const resultItem = document.createElement('div');
                resultItem.className = 'search-result-item';
                resultItem.innerHTML = `
                    <div class="search-result-name">${product.name}</div>
                    <div class="search-result-desc">${product.quota} | ${product.validity} | Rp ${product.price.toLocaleString('id-ID')}</div>
                `;
                
                resultItem.addEventListener('click', () => {
                    closeSearchModalHandler();
                    // Scroll to the product
                    const productElement = document.querySelector(`.product-item:nth-child(${products.indexOf(product) + 1})`);
                    if (productElement) {
                        productElement.scrollIntoView({ behavior: 'smooth' });
                        // Add highlight effect
                        productElement.style.backgroundColor = 'rgba(108, 99, 255, 0.2)';
                        setTimeout(() => {
                            productElement.style.backgroundColor = '';
                        }, 2000);
                    }
                });
                
                searchResults.appendChild(resultItem);
            });
        }

        // Modal functions
        function showLoadingModal(title, subtitle) {
            const loadingText = document.querySelector('.loading-text');
            const loadingSubtext = document.querySelector('.loading-subtext');
            
            loadingText.textContent = title;
            loadingSubtext.textContent = subtitle;
            
            loadingModal.style.display = 'flex';
        }

        function hideLoadingModal() {
            loadingModal.style.display = 'none';
        }

        function showSuccessModal(title, message) {
            const successText = document.querySelector('.success-text');
            const successSubtext = document.querySelector('.success-subtext');
            
            successText.textContent = title;
            successSubtext.textContent = message;
            
            successModal.style.display = 'flex';
        }

        function showInvalidModal(title, message) {
            const invalidTitle = document.getElementById('invalid-title');
            const invalidMessage = document.getElementById('invalid-message');
            
            invalidTitle.textContent = title;
            invalidMessage.textContent = message;
            
            invalidModal.style.display = 'flex';
        }

        function showWarningPopup(title, message) {
            const warningText = document.querySelector('.warning-text');
            const warningSubtext = document.querySelector('.warning-subtext');
            
            warningText.textContent = title;
            warningSubtext.textContent = message;
            
            warningPopup.style.display = 'flex';
        }

        // Balance functions
        function updateBalance() {
            // In a real app, this would come from the server
            const balance = 50000; // Default balance for demo
            localStorage.setItem('userBalance', balance);
            balanceDisplay.textContent = `Rp ${balance.toLocaleString('id-ID')}`;
        }

        function getCurrentBalance() {
            return parseInt(localStorage.getItem('userBalance') || '50000');
        }

        function updateBalance(newBalance) {
            localStorage.setItem('userBalance', newBalance);
            balanceDisplay.textContent = `Rp ${newBalance.toLocaleString('id-ID')}`;
        }

        // Navigation function
        function navigateTo(page) {
            // In a real app, this would navigate to the specified page
            alert(`Navigasi ke: ${page}`);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>