<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Status Monitor - PX STORE</title>
    <link rel="icon" href="assets/images/icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #6c63ff;
            --primary-dark: #564fd8;
            --secondary: #4d44db;
            --accent: #9d4edd;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-hover: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
            
            /* Status colors */
            --online: #22c55e;
            --offline: #ef4444;
            --slow: #f59e0b;
            --unknown: #64748b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            padding-bottom: 80px;
        }
        
        .app-container {
            padding: 15px;
            padding-bottom: 80px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Header Section - Serasi dengan beranda */
        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        
        .profile-left {
            display: flex;
            align-items: center;
        }
        
        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            overflow: hidden;
            padding: 0;
        }
        
        .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .username {
            font-weight: 600;
        }
        
        .points-container {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px;
        }
        
        .points {
            font-weight: 600;
            font-size: 14px;
            color: #e2e2e2;
            text-transform: capitalize;
            letter-spacing: 0.5px;
        }
        
        .point-icon {
            color: #f1c40f;
        }
        
        /* Header Server Monitor */
        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .header-left h1 {
            margin-bottom: 5px;
            color: var(--text-primary);
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .header-left p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .last-update {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 10px 15px;
            border-radius: var(--border-radius);
        }
        
        .refresh-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.4);
        }
        
        .refresh-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            background-color: var(--dark-hover);
        }
        
        .stat-card i {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 5px 0;
            color: var(--primary);
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .server-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .server-item {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 15px;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .server-item:hover {
            transform: translateY(-3px);
            background-color: var(--dark-hover);
        }
        
        .server-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .server-name {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            position: relative;
        }
        
        .status-online {
            background-color: var(--online);
            box-shadow: 0 0 10px var(--online);
            animation: blink 2s infinite;
        }
        
        .status-offline {
            background-color: var(--offline);
            box-shadow: 0 0 10px var(--offline);
            animation: blink 1.5s infinite;
        }
        
        .status-slow {
            background-color: var(--slow);
            box-shadow: 0 0 10px var(--slow);
            animation: blink 1s infinite;
        }
        
        .status-unknown {
            background-color: var(--unknown);
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .server-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            text-align: center;
        }
        
        .stat {
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            position: relative;
        }
        
        .stat-value-sm {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .stat-label-sm {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .server-actions {
            display: flex;
            justify-content: flex-end;
        }
        
        .details-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .details-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
        }
        
        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .server-selector {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .chart-container {
            height: 250px;
            position: relative;
        }
        
        /* Download/Upload Animation */
        .download-upload-animation {
            position: relative;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .download-bar, .upload-bar {
            position: absolute;
            height: 100%;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .download-bar {
            background: linear-gradient(90deg, var(--online), #4ade80);
            top: 0;
            left: 0;
        }
        
        .upload-bar {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            top: 0;
            left: 0;
        }
        
        /* Ping Animation */
        .ping-animation {
            position: relative;
            display: inline-block;
            width: 20px;
            height: 20px;
        }
        
        .ping-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: currentColor;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .ping-ring {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid currentColor;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
        }
        
        .ping-animation.pinging .ping-ring {
            animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
        }
        
        @keyframes ping {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0.8;
            }
            80%, 100% {
                transform: translate(-50%, -50%) scale(2.4);
                opacity: 0;
            }
        }
        
        /* Server Meta Info */
        .server-meta {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 8px;
        }
        
        .server-status, .server-location, .server-update {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .server-status i, .server-location i, .server-update i {
            font-size: 0.8rem;
            width: 14px;
        }
        
        .status-online-text {
            color: var(--online);
        }
        
        .status-offline-text {
            color: var(--offline);
        }
        
        .status-slow-text {
            color: var(--slow);
        }
        
        /* Live Indicator */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.7rem;
            color: var(--online);
            margin-left: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .live-dot {
            width: 6px;
            height: 6px;
            background-color: var(--online);
            border-radius: 50%;
            display: inline-block;
        }
        
        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toast {
            background: var(--dark-card);
            color: var(--text-primary);
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 250px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast.hide {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .toast-icon {
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .toast-success .toast-icon {
            background-color: var(--online);
        }
        
        .toast-error .toast-icon {
            background-color: var(--offline);
        }
        
        .toast-warning .toast-icon {
            background-color: var(--slow);
        }
        
        .toast-info .toast-icon {
            background-color: var(--primary);
        }
        
        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 600;
            margin-bottom: 2px;
            font-size: 0.9rem;
        }
        
        .toast-message {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .toast-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .toast-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        /* Navbar - Sama dengan beranda */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: var(--dark-card);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
            padding: 10px 0;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            z-index: 1000;
        }

        .center-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }

        .logo-circle {
            background-color: var(--primary);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }

        .nav-logo {
            height: 40px;
        }

        .menu-title {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            font-size: 10px;
            cursor: pointer;
            flex: 1;
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .server-item {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .server-actions {
                justify-content: center;
            }
        }
        
        @media (max-width: 768px) {
            .server-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .server-stats {
                grid-template-columns: 1fr;
            }
            
            .server-name {
                justify-content: center;
            }
            
            .chart-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .server-selector {
                width: 100%;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .app-container {
                padding: 10px;
                padding-bottom: 70px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .server-header {
                padding: 15px;
            }
            
            .header-left h1 {
                font-size: 1.5rem;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 1.8rem;
            }
            
            .server-item {
                padding: 15px;
            }
            
            .server-name {
                font-size: 1.1rem;
            }
            
            .chart-card {
                padding: 15px;
            }
            
            .chart-container {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Profile Header - Serasi dengan beranda -->
        <div class="profile-header">
            <div class="profile-left">
                <div class="profile-icon">
                    <img src="assets/images/icon.ico" alt="PX STORE">
                </div>
                <div>
                    <span class="username">Server Status Monitor</span>
                    <div class="points-container">
                        <i class="fas fa-server point-icon"></i>
                        <span class="points" id="userDisplay">Pantau Status Server</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Server Monitor Header -->
        <div class="server-header">
            <div class="header-left">
                <h1>Server Status Monitor</h1>
                <p>Pantau status server secara real-time <span class="live-indicator"><span class="live-dot"></span>LIVE</span></p>
            </div>
            <div class="last-update">
                <i class="fas fa-clock"></i>
                <span>Terakhir update: <span id="last-update-time">-</span></span>
                <button class="refresh-btn" id="refresh-btn">
                    <i class="fas fa-sync-alt"></i>
                    Refresh
                </button>
            </div>
        </div>
        
        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-server"></i>
                <span class="stat-value" id="total-servers">0</span>
                <span class="stat-label">Total Server</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <span class="stat-value" id="online-servers">0</span>
                <span class="stat-label">Server Online</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-network-wired"></i>
                <span class="stat-value" id="avg-ping">0 ms</span>
                <span class="stat-label">Rata-rata Ping</span>
            </div>
            <div class="stat-card">
                <i class="fas fa-arrow-up"></i>
                <span class="stat-value" id="uptime-percentage">0%</span>
                <span class="stat-label">Uptime (24 jam)</span>
            </div>
        </div>
        
        <!-- Server List -->
        <div class="server-list" id="server-list">
            <!-- Server items will be generated here -->
        </div>
        
        <!-- Charts Container -->
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Ping Response Time (ms)</div>
                    <select class="server-selector" id="ping-server-selector">
                        <option value="all">Semua Server</option>
                        <!-- Server options will be generated here -->
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="ping-chart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Bandwidth Usage</div>
                    <select class="server-selector" id="bandwidth-server-selector">
                        <option value="all">Semua Server</option>
                        <!-- Server options will be generated here -->
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="bandwidth-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Navbar - Sama dengan beranda -->
    <div class="navbar">
        <div class="nav-item" onclick="navigateTo('beranda.html')">
            <i class="fas fa-home"></i>
            <span>Beranda</span>
        </div>

        <div class="nav-item" onclick="navigateTo('riwayat.html')">
            <i class="fas fa-shopping-cart"></i>
            <span>Transaksi</span>
        </div>

        <!-- Menu Tengah dengan Logo + Lingkaran + Judul -->
        <div class="nav-item center-menu active" onclick="navigateTo('server.html')">
            <div class="logo-circle">
                <img src="assets/images/icon.ico" alt="Logo" class="nav-logo">
            </div>
            <span class="menu-title">Server</span>
        </div>

        <div class="nav-item" onclick="navigateTo('profil.html')">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </div>
        <div class="nav-item" onclick="navigateTo('logout.html')">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </div>
    </div>

    <script>
        // Data simulasi server
        const servers = [
            { 
                id: 1, 
                name: "ID NUSA", 
                ip: "192.168.1.101", 
                location: "Medan, Indonesia",
                status: "online", 
                ping: 11, 
                uptime: "99.8%", 
                download: 225, 
                upload: 150,
                lastUpdate: new Date(Date.now() - 2*60000)
            },
            { 
                id: 2, 
                name: "ID NEVA", 
                ip: "192.168.1.102", 
                location: "Jakarta, Indonesia",
                status: "online", 
                ping: 13, 
                uptime: "97.9%", 
                download: 351, 
                upload: 130,
                lastUpdate: new Date(Date.now() - 5*60000)
            },
            { 
                id: 3, 
                name: "ID BIZNET", 
                ip: "192.168.1.103", 
                location: "Jakarta, Indonesia",
                status: "offline", 
                ping: 0, 
                uptime: "0%", 
                download: 0, 
                upload: 0
            },
            { 
                id: 4, 
                name: "ID CLOUD", 
                ip: "192.168.1.104", 
                location: "Jakarta, Indonesia",
                status: "offline", 
                ping: 45, 
                uptime: "95.2%", 
                download: 180, 
                upload: 90,
                lastUpdate: new Date(Date.now() - 1*60000)
            },
            { 
                id: 5, 
                name: "SGDO V1", 
                ip: "192.168.1.105", 
                location: "Singapore",
                status: "offline", 
                ping: 14, 
                uptime: "98.5%", 
                download: 254, 
                upload: 192,
                lastUpdate: new Date(Date.now() - 3*60000)
            },
            { 
                id: 6, 
                name: "SGDO V2", 
                ip: "192.168.1.106", 
                location: "Singapore",
                status: "offline", 
                ping: 15, 
                uptime: "97%", 
                download: 301, 
                upload: 180,
                lastUpdate: new Date(Date.now() - 2*60000)
            }
        ];

        // Variabel global untuk chart
        let pingChart = null;
        let bandwidthChart = null;
        let lastUpdateTime = null;
        let autoUpdateInterval = null;

        // Fungsi untuk menginisialisasi aplikasi
        function initApp() {
            updateLastUpdateTime();
            renderServerList();
            updateStats();
            initCharts();
            setupEventListeners();
            displayUsername();
            
            // Mulai animasi untuk semua server
            startAllAnimations();
            
            // Mulai pembaruan otomatis
            startAutoUpdate();
        }

        // Fungsi untuk menampilkan username
        function displayUsername() {
            const savedUsername = localStorage.getItem('pxstore_username');
            const userDisplay = document.getElementById('userDisplay');
            
            if (savedUsername && userDisplay) {
                userDisplay.textContent = savedUsername;
            }
        }

        // Fungsi untuk memulai pembaruan otomatis
        function startAutoUpdate() {
            // Hentikan interval sebelumnya jika ada
            if (autoUpdateInterval) {
                clearInterval(autoUpdateInterval);
            }
            
            // Atur interval pembaruan setiap 5 detik
            autoUpdateInterval = setInterval(() => {
                updateNetworkDataOnly();
            }, 5000);
        }

        // Fungsi untuk memperbarui data jaringan saja (tanpa refresh penuh)
        function updateNetworkDataOnly() {
            servers.forEach(server => {
                if (server.status !== 'offline') {
                    // Simulasikan perubahan data yang lebih realistis
                    const oldDownload = server.download;
                    const oldUpload = server.upload;
                    const oldPing = server.ping;
                    
                    // Generate perubahan acak yang lebih halus dan realistis
                    const downloadChange = Math.floor(Math.random() * 21) - 10;
                    const uploadChange = Math.floor(Math.random() * 15) - 7;
                    const pingChange = Math.floor(Math.random() * 7) - 3;
                    
                    // Terapkan perubahan dengan batasan minimal dan maksimal
                    server.download = Math.max(10, Math.min(500, server.download + downloadChange));
                    server.upload = Math.max(5, Math.min(200, server.upload + uploadChange));
                    server.ping = Math.max(5, Math.min(100, server.ping + pingChange));
                    
                    // Update waktu terakhir update
                    server.lastUpdate = new Date();
                    
                    // Update UI untuk server ini
                    updateServerUI(server.id, oldDownload, oldUpload, oldPing);
                }
            });
            
            // Update statistik ringkasan
            updateStats();
            updateLastUpdateTime();
            
            // Trigger animasi download/upload
            triggerNetworkAnimation();
        }

        // Fungsi untuk memperbarui UI server tertentu
        function updateServerUI(serverId, oldDownload, oldUpload, oldPing) {
            const server = servers.find(s => s.id === serverId);
            if (!server) return;
            
            // Update nilai di UI
            const downloadElement = document.querySelector(`.server-${serverId} .download-value`);
            const uploadElement = document.querySelector(`.server-${serverId} .upload-value`);
            const pingElement = document.querySelector(`.server-${serverId} .ping-value`);
            const updateElement = document.querySelector(`.server-${serverId} .server-update span`);
            
            if (downloadElement) {
                animateValueChangeElement(downloadElement, oldDownload, server.download, ' Mbps');
            }
            
            if (uploadElement) {
                animateValueChangeElement(uploadElement, oldUpload, server.upload, ' Mbps');
            }
            
            if (pingElement) {
                animateValueChangeElement(pingElement, oldPing, server.ping, ' ms');
            }
            
            if (updateElement) {
                updateElement.textContent = `Update: ${formatTimeDifference(server.lastUpdate)}`;
            }
            
            // Update progress bars
            const downloadBar = document.querySelector(`.server-${serverId} .download-bar`);
            const uploadBar = document.querySelector(`.server-${serverId} .upload-bar`);
            
            if (downloadBar) {
                downloadBar.style.width = `${server.download / 5}%`;
            }
            
            if (uploadBar) {
                uploadBar.style.width = `${server.upload / 2.5}%`;
            }
        }

        // Fungsi untuk animasi perubahan nilai pada elemen
        function animateValueChangeElement(element, oldValue, newValue, suffix) {
            if (parseInt(element.textContent) === newValue) return;
            
            element.classList.add('value-changing');
            
            // Gunakan animasi counting jika perubahannya signifikan
            if (Math.abs(newValue - oldValue) > 5) {
                animateCount(element, oldValue, newValue, suffix);
            } else {
                // Perubahan kecil, langsung update
                setTimeout(() => {
                    element.textContent = newValue + suffix;
                    setTimeout(() => {
                        element.classList.remove('value-changing');
                    }, 800);
                }, 400);
            }
        }

        // Fungsi untuk animasi counting
        function animateCount(element, start, end, suffix) {
            let startTimestamp = null;
            const duration = 800;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(step);
                } else {
                    element.textContent = end + suffix;
                    setTimeout(() => {
                        element.classList.remove('value-changing');
                    }, 300);
                }
            };
            requestAnimationFrame(step);
        }

        // Fungsi untuk memperbarui waktu terakhir update
        function updateLastUpdateTime() {
            lastUpdateTime = new Date();
            document.getElementById('last-update-time').textContent = lastUpdateTime.toLocaleTimeString();
        }

        // Fungsi untuk merender daftar server
        function renderServerList() {
            const serverList = document.getElementById('server-list');
            serverList.innerHTML = '';
            
            servers.forEach(server => {
                const statusClass = `status-${server.status}`;
                const statusText = server.status.charAt(0).toUpperCase() + server.status.slice(1);
                const statusTextClass = `status-${server.status}-text`;
                
                // Format waktu terakhir update
                const lastUpdate = formatTimeDifference(server.lastUpdate);
                
                const serverItem = document.createElement('div');
                serverItem.className = `server-item server-${server.id}`;
                serverItem.innerHTML = `
                    <div class="server-info">
                        <div class="server-name">
                            <span class="status-indicator ${statusClass}"></span>
                            ${server.name}
                        </div>
                        <div class="server-meta">
                            <div class="server-status">
                                <i class="fas fa-circle"></i>
                                <span class="${statusTextClass}">Status: ${statusText}</span>
                            </div>
                            <div class="server-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${server.location}</span>
                            </div>
                            <div class="server-update">
                                <i class="fas fa-clock"></i>
                                <span>Update: ${lastUpdate}</span>
                            </div>
                        </div>
                        <div class="download-upload-animation">
                            <div class="download-bar" style="width: ${server.status === 'offline' ? 0 : server.download / 5}%"></div>
                            <div class="upload-bar" style="width: ${server.status === 'offline' ? 0 : server.upload / 2.5}%"></div>
                        </div>
                    </div>
                    <div class="server-stats">
                        <div class="stat">
                            <div class="ping-animation ${server.status !== 'offline' ? 'pinging' : ''}">
                                <div class="ping-dot"></div>
                                <div class="ping-ring"></div>
                            </div>
                            <div class="stat-value-sm ping-value">${server.ping} ms</div>
                            <div class="stat-label-sm">Ping</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value-sm">${server.uptime}</div>
                            <div class="stat-label-sm">Uptime</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value-sm download-value">${server.download} Mbps</div>
                            <div class="stat-label-sm">Download</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value-sm upload-value">${server.upload} Mbps</div>
                            <div class="stat-label-sm">Upload</div>
                        </div>
                    </div>
                    <div class="server-actions">
                        <button class="details-btn" data-server-id="${server.id}">
                            <i class="fas fa-info-circle"></i>
                            Details
                        </button>
                    </div>
                `;
                
                serverList.appendChild(serverItem);
            });
            
            // Update selector options
            updateServerSelectors();
            
            // Setup event listeners untuk tombol details
            document.querySelectorAll('.details-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serverId = this.getAttribute('data-server-id');
                    showServerDetails(serverId);
                });
            });
        }

        // Fungsi untuk memformat perbedaan waktu
        function formatTimeDifference(date) {
            if (!date) return 'Tidak diketahui';
            
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            
            if (diffMins < 1) return 'Baru saja';
            if (diffMins === 1) return '1 menit lalu';
            if (diffMins < 60) return `${diffMins} menit lalu`;
            
            const diffHours = Math.floor(diffMins / 60);
            if (diffHours === 1) return '1 jam lalu';
            if (diffHours < 24) return `${diffHours} jam lalu`;
            
            const diffDays = Math.floor(diffHours / 24);
            if (diffDays === 1) return '1 hari lalu';
            return `${diffDays} hari lalu`;
        }

        // Fungsi untuk memperbarui statistik ringkasan
        function updateStats() {
            const totalServers = servers.length;
            const onlineServers = servers.filter(server => server.status === 'online').length;
            
            const onlineServersForPing = servers.filter(server => server.status !== 'offline');
            const avgPing = onlineServersForPing.length > 0 
                ? Math.round(onlineServersForPing.reduce((sum, server) => sum + server.ping, 0) / onlineServersForPing.length) 
                : 0;
                
            const uptimePercentage = Math.round(servers.reduce((sum, server) => {
                const uptime = parseFloat(server.uptime) || 0;
                return sum + uptime;
            }, 0) / servers.length);
            
            // Animasi perubahan angka
            animateValue('total-servers', totalServers, '');
            animateValue('online-servers', onlineServers, '');
            animateValue('avg-ping', avgPing, ' ms');
            animateValue('uptime-percentage', uptimePercentage, '%');
        }

        // Fungsi untuk animasi perubahan angka
        function animateValue(elementId, targetValue, suffix = '') {
            const element = document.getElementById(elementId);
            const currentText = element.textContent;
            const currentValue = parseInt(currentText.replace(/\D/g, '')) || 0;
            
            if (currentValue === targetValue) return;
            
            let startTimestamp = null;
            const duration = 1000;
            
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (targetValue - currentValue) + currentValue);
                element.textContent = value + suffix;
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    element.textContent = targetValue + suffix;
                }
            };
            
            window.requestAnimationFrame(step);
        }

        // Fungsi untuk mengupdate selector server di chart
        function updateServerSelectors() {
            const pingSelector = document.getElementById('ping-server-selector');
            const bandwidthSelector = document.getElementById('bandwidth-server-selector');
            
            // Hapus opsi yang sudah ada kecuali "Semua Server"
            while (pingSelector.options.length > 1) pingSelector.remove(1);
            while (bandwidthSelector.options.length > 1) bandwidthSelector.remove(1);
            
            // Tambahkan opsi untuk setiap server
            servers.forEach(server => {
                const option = document.createElement('option');
                option.value = server.id;
                option.textContent = server.name;
                
                pingSelector.appendChild(option.cloneNode(true));
                bandwidthSelector.appendChild(option);
            });
        }

        // Fungsi untuk inisialisasi chart
        function initCharts() {
            const pingCtx = document.getElementById('ping-chart').getContext('2d');
            const bandwidthCtx = document.getElementById('bandwidth-chart').getContext('2d');
            
            // Data untuk chart ping
            const pingData = {
                labels: ['10:00', '10:05', '10:10', '10:15', '10:20', '10:25', '10:30'],
                datasets: [
                    {
                        label: 'Web Server',
                        data: [22, 25, 28, 24, 26, 23, 24],
                        borderColor: '#6c63ff',
                        backgroundColor: 'rgba(108, 99, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Database Server',
                        data: [40, 38, 42, 45, 41, 39, 42],
                        borderColor: '#9d4edd',
                        backgroundColor: 'rgba(157, 78, 221, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            };
            
            // Data untuk chart bandwidth
            const bandwidthData = {
                labels: ['10:00', '10:05', '10:10', '10:15', '10:20', '10:25', '10:30'],
                datasets: [
                    {
                        label: 'Download (Mbps)',
                        data: [75, 80, 72, 85, 78, 82, 79],
                        borderColor: '#22c55e',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Upload (Mbps)',
                        data: [25, 28, 22, 30, 26, 29, 27],
                        borderColor: '#6c63ff',
                        backgroundColor: 'rgba(108, 99, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            };
            
            // Konfigurasi chart ping
            pingChart = new Chart(pingCtx, {
                type: 'line',
                data: pingData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#a0a0a0'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0a0a0'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0a0a0'
                            },
                            beginAtZero: true
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
            
            // Konfigurasi chart bandwidth
            bandwidthChart = new Chart(bandwidthCtx, {
                type: 'line',
                data: bandwidthData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#a0a0a0'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0a0a0'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0a0a0'
                            },
                            beginAtZero: true
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }

        // Fungsi untuk mengatur event listeners
        function setupEventListeners() {
            // Event listener untuk tombol refresh
            document.getElementById('refresh-btn').addEventListener('click', updateData);
            
            // Event listener untuk selector server di chart
            document.getElementById('ping-server-selector').addEventListener('change', function() {
                updateChartData(this.value, 'ping');
            });
            
            document.getElementById('bandwidth-server-selector').addEventListener('change', function() {
                updateChartData(this.value, 'bandwidth');
            });
        }

        // Fungsi untuk memperbarui data
        function updateData() {
            // Simulasi pembaruan data server
            servers.forEach(server => {
                if (server.status !== 'offline') {
                    // Update ping dengan variasi kecil
                    const oldPing = server.ping;
                    server.ping = Math.max(10, server.ping + Math.floor(Math.random() * 11) - 5);
                    
                    // Update download/upload dengan variasi
                    const oldDownload = server.download;
                    const oldUpload = server.upload;
                    
                    server.download = Math.max(10, Math.min(500, server.download + Math.floor(Math.random() * 41) - 20));
                    server.upload = Math.max(5, Math.min(200, server.upload + Math.floor(Math.random() * 31) - 15));
                    
                    // Update waktu terakhir update
                    server.lastUpdate = new Date();
                    
                    // Animasi perubahan nilai
                    animateValueChange(server.id, 'ping', oldPing, server.ping);
                    animateValueChange(server.id, 'download', oldDownload, server.download);
                    animateValueChange(server.id, 'upload', oldUpload, server.upload);
                }
            });
            
            // Render ulang data
            renderServerList();
            updateStats();
            updateLastUpdateTime();
            
            // Tampilkan notifikasi
            showToast('Data diperbarui', 'Data server berhasil diperbarui.', 'success');
            
            // Trigger animasi download/upload
            triggerNetworkAnimation();
            
            // Mulai animasi untuk semua server
            startAllAnimations();
            
            // Restart auto update
            startAutoUpdate();
        }

        // Fungsi untuk animasi perubahan nilai
        function animateValueChange(serverId, type, oldValue, newValue) {
            const element = document.querySelector(`.server-${serverId} .${type}-value`);
            if (element) {
                element.classList.add('value-changing');
                setTimeout(() => {
                    element.textContent = type === 'ping' ? `${newValue} ms` : `${newValue} Mbps`;
                    setTimeout(() => {
                        element.classList.remove('value-changing');
                    }, 800);
                }, 400);
            }
        }

        // Fungsi untuk memperbarui data chart berdasarkan server yang dipilih
        function updateChartData(serverId, chartType) {
            // Implementasi pembaruan data chart berdasarkan server yang dipilih
            console.log(`Update ${chartType} chart for server: ${serverId}`);
            
            // Untuk demo, kita hanya menampilkan pesan
            showToast('Chart Diperbarui', `Menampilkan data untuk server ${serverId}`, 'info');
        }

        // Fungsi untuk menampilkan detail server
        function showServerDetails(serverId) {
            const server = servers.find(s => s.id == serverId);
            if (server) {
                showToast(
                    `Detail ${server.name}`,
                    `Status: ${server.status}<br>Lokasi: ${server.location}<br>Ping: ${server.ping}ms<br>Uptime: ${server.uptime}<br>Download: ${server.download} Mbps<br>Upload: ${server.upload} Mbps<br>Update: ${formatTimeDifference(server.lastUpdate)}`,
                    'info'
                );
            }
        }

        // Fungsi untuk menampilkan toast notification
        function showToast(title, message, type = 'info') {
            const toastContainer = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas ${icons[type]}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Tampilkan toast
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Event listener untuk tombol close
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.classList.remove('show');
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            });
            
            // Auto-hide setelah 5 detik
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.classList.remove('show');
                    toast.classList.add('hide');
                    setTimeout(() => toast.remove(), 300);
                }
            }, 5000);
        }

        // Fungsi untuk memicu animasi jaringan
        function triggerNetworkAnimation() {
            const serverItems = document.querySelectorAll('.server-item');
            
            serverItems.forEach(item => {
                const downloadBar = item.querySelector('.download-bar');
                const uploadBar = item.querySelector('.upload-bar');
                
                // Reset animasi
                downloadBar.style.animation = 'none';
                uploadBar.style.animation = 'none';
                
                // Trigger reflow
                void downloadBar.offsetWidth;
                void uploadBar.offsetWidth;
                
                // Terapkan animasi
                downloadBar.style.animation = 'downloadAnimation 1.5s ease-out forwards';
                uploadBar.style.animation = 'uploadAnimation 1.5s ease-out forwards';
                uploadBar.style.animationDelay = '0.3s';
            });
        }

        // Fungsi untuk memulai semua animasi
        function startAllAnimations() {
            // Mulai animasi ping untuk semua server yang online/slow
            const pingAnimations = document.querySelectorAll('.ping-animation');
            pingAnimations.forEach(animation => {
                if (animation.classList.contains('pinging')) {
                    animation.classList.remove('pinging');
                    void animation.offsetWidth;
                    animation.classList.add('pinging');
                }
            });
            
            // Trigger animasi download/upload
            triggerNetworkAnimation();
        }

        // Fungsi untuk navigasi antar halaman
        function navigateTo(page) {
            window.location.href = page;
        }

        // Animasi untuk download/upload bars
        const style = document.createElement('style');
        style.textContent = `
            @keyframes downloadAnimation {
                0% { width: 0%; }
                50% { width: 85%; }
                100% { width: 100%; }
            }
            
            @keyframes uploadAnimation {
                0% { width: 0%; }
                70% { width: 60%; }
                100% { width: 70%; }
            }
            
            @keyframes valueChange {
                0% { transform: scale(1); }
                25% { transform: scale(1.2); color: #6c63ff; }
                50% { transform: scale(0.9); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);

        // Inisialisasi aplikasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>